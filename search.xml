<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>CPU架构学习</title>
      <link href="/2020/05/27/CPU%E6%9E%B6%E6%9E%84%E5%AD%A6%E4%B9%A0/"/>
      <url>/2020/05/27/CPU%E6%9E%B6%E6%9E%84%E5%AD%A6%E4%B9%A0/</url>
      
        <content type="html"><![CDATA[<p><a href="https://github.com/drgonroot/drgonroot.github.io/issues/new" target="_blank" rel="noopener">吐槽、建议、解惑入口网址</a></p><p>对于目前市面CPU架构拆分，命令上理解。i386</p><ul><li><p><a href="https://zhuanlan.zhihu.com/p/81472964" target="_blank" rel="noopener">CPU架构</a>  arm  x86  x86_64  ppc64</p></li><li><p><a href="https://wiki.centos.org/SpecialInterestGroup/AltArch/armhfp" target="_blank" rel="noopener">AltarchCentos学习</a></p></li></ul>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>树莓派安装Centos7</title>
      <link href="/2020/05/24/%E6%A0%91%E8%8E%93%E6%B4%BE%E5%AE%89%E8%A3%85Centos7/"/>
      <url>/2020/05/24/%E6%A0%91%E8%8E%93%E6%B4%BE%E5%AE%89%E8%A3%85Centos7/</url>
      
        <content type="html"><![CDATA[<p><a href="https://github.com/drgonroot/drgonroot.github.io/issues/new" target="_blank" rel="noopener">吐槽、建议、解惑入口网址</a></p><h4 id="树莓派安装Centos7"><a href="#树莓派安装Centos7" class="headerlink" title="树莓派安装Centos7"></a>树莓派安装Centos7</h4><h5 id="树莓派Centos选择下载"><a href="#树莓派Centos选择下载" class="headerlink" title="树莓派Centos选择下载"></a>树莓派Centos选择下载</h5><blockquote><p>简单描述下Centos分为release发版和stream不稳定发版。release迭代较慢，安全。stream迭代较慢，不稳定。</p></blockquote><p><strong>Centos7 下载</strong>   </p><ul><li><a href="http://isoredirect.centos.org/altarch/7/isos/armhfp/" target="_blank" rel="noopener">Arm架构Centos下载</a>  </li></ul><p>目前笔者购买是关于树莓派4B-4G,选择安装包为University CentOS-Userland-7-armv7hl-RaspberryPI-Minimal-4-2003-sda .raw.xz。</p><p><strong>树莓派Centos连接</strong></p><ul><li>先将树莓派连接网线，并启动</li><li>连接的电脑也需要连接WIFI网络上（让电脑和树莓派保持在同一个局域网内）</li><li>使用<a href="https://angryip.org/" target="_blank" rel="noopener">IP Scanner</a>软件进行扫描 ,找到新增ip<br><img src="images/%E6%A0%91%E8%8E%93%E6%B4%BEIPScanner.png" alt="树莓派IPScanner"></li><li>ssh <a href="mailto:root@xxx.xxx.xxx.xxx" target="_blank" rel="noopener">root@xxx.xxx.xxx.xxx</a>  默认密码centos</li></ul><p><strong>Centos7 拓展主分区</strong></p><blockquote><p>由于系统默认的映像把根分区的空间设定得很小，因此我们需要手动扩展根分区。 详情参考<a href="https://zhuanlan.zhihu.com/p/33030757" target="_blank" rel="noopener">为树莓派装上 CentOS 7 系统</a></p></blockquote><p>首次连接树莓派，会发现主分区没有可用的空间。<br>存储卡硬盘 <code>/dev/mmcblk0</code> 分成3个分区(mmcblk0p1/mmcblk0p2/mmcblk0p3),mmcblk0p3的主分区没有被挂载上。</p><a id="more"></a><p><em>执行步骤</em></p><ul><li>执行 <code>rootfs-expand</code></li><li>检查硬盘分区拓展情况 <code>df -lh</code></li></ul><hr><p>没有效果则只能将mmcblk0重新进行分区，然后重启</p><ul><li>执行分区命令 <code>fdisk /dev/mmcblk0</code></li><li>删除第三个主分区回车 <code>d</code></li><li>新增第三个主分区回车 <code>n</code></li><li>注意设定的开始扇区和结尾扇区，从第二块主分区结尾扇区 + 1开始。不然默认是使用第一块主分区前面的扇区，存储空间很小。</li><li>将树莓派重新启动，<code>reboot</code></li><li>启动后，直接再次执行 <code>rootfs-expand</code> / <code>resize2fs /dev/mmcblk0p3</code></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">设备 Boot      Start         End      Blocks   Id  System</span><br><span class="line">/dev/mmcblk0p1   *        8192      593919      292864    c  W95 FAT32 (LBA)</span><br><span class="line">/dev/mmcblk0p2          593920     1593343      499712   82  Linux swap / Solaris</span><br><span class="line">/dev/mmcblk0p3         1593344    31116287    14761472   83  Linux</span><br><span class="line">### 执行前效果</span><br><span class="line">[root@localhost ~]# df -lh</span><br><span class="line">文件系统        容量  已用  可用 已用% 挂载点</span><br><span class="line">/dev/root       1.7G  1.7G     0  100% /</span><br><span class="line">devtmpfs        1.9G     0  1.9G    0% /dev</span><br><span class="line">tmpfs           1.9G     0  1.9G    0% /dev/shm</span><br><span class="line">tmpfs           1.9G  8.4M  1.9G    1% /run</span><br><span class="line">tmpfs           1.9G     0  1.9G    0% /sys/fs/cgroup</span><br><span class="line">/dev/mmcblk0p1  286M   53M  233M   19% /boot</span><br><span class="line">tmpfs           383M     0  383M    0% /run/user/0</span><br><span class="line"></span><br><span class="line">[root@localhost ~]# ll /dev | grep mmcb</span><br><span class="line">brw-rw----. 1 root disk    179,   0 1月   1 00:00 mmcblk0</span><br><span class="line">brw-rw----. 1 root disk    179,   1 1月   1 00:00 mmcblk0p1</span><br><span class="line">brw-rw----. 1 root disk    179,   2 1月   1 00:00 mmcblk0p2</span><br><span class="line">brw-rw----. 1 root disk    179,   3 1月   1 00:04 mmcblk0p3</span><br><span class="line"></span><br><span class="line">### 执行后效果</span><br><span class="line">[root@localhost ~]# df -lh</span><br><span class="line">文件系统        容量  已用  可用 已用% 挂载点</span><br><span class="line">/dev/root        14G  1.7G   13G   13% /</span><br><span class="line">devtmpfs        1.9G     0  1.9G    0% /dev</span><br><span class="line">tmpfs           1.9G     0  1.9G    0% /dev/shm</span><br><span class="line">tmpfs           1.9G  8.4M  1.9G    1% /run</span><br><span class="line">tmpfs           1.9G     0  1.9G    0% /sys/fs/cgroup</span><br><span class="line">/dev/mmcblk0p1  286M   53M  233M   19% /boot</span><br><span class="line">tmpfs           383M     0  383M    0% /run/user/0</span><br></pre></td></tr></table></figure><h5 id="主机名、网络、时区、语言、键盘配置"><a href="#主机名、网络、时区、语言、键盘配置" class="headerlink" title="主机名、网络、时区、语言、键盘配置"></a>主机名、网络、时区、语言、键盘配置</h5><hr><h6 id="主机名配置"><a href="#主机名配置" class="headerlink" title="主机名配置"></a>主机名配置</h6><p><code>hostnamectl status</code><br><code>hostnamectl set-hostname xxxx主机名名称</code></p><hr><h6 id="网络配置"><a href="#网络配置" class="headerlink" title="网络配置"></a>网络配置</h6><p><code>nmtui</code><br><code>nmcli  d</code><br><code>nmcli  d  wifi</code><br><code>nmcli d wifi connect xxxWiFi名称 password &#39;xxxWiFi密码&#39;</code><br><code>cat /etc/resolv.conf</code><br>网络连接文件夹： <code>cd /etc/sysconfig/network-scripts</code>  <code>cat ifcfg-网络名称</code><br>设置网络连接开机自启动 <code>systemctl enabled NetworkManager.service</code></p><hr><h6 id="语言配置"><a href="#语言配置" class="headerlink" title="语言配置"></a>语言配置</h6><p><code>localectl</code><br><code>localectl set-locale LANG=zh_CN.UTF-8</code><br><code>locale</code><br><code>update-locale LANG=LANG=zh_CN.UTF-8 LANGUAGE</code><br><code>cat /etc/locale.conf</code></p><hr><h6 id="时区配置"><a href="#时区配置" class="headerlink" title="时区配置"></a>时区配置</h6><p><code>date -R</code>   </p><ul><li>方案一：<br><code>tzselect</code><br>按照步骤使用命令<code>tzselect</code>选择国家时区<br>执行TZ=’Asia/Shanghai’; export TZ 并将这行命令添加到.bash_profile中，然后退出并重新登录。</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">You can make this change permanent for yourself by appending the line</span><br><span class="line"></span><br><span class="line">to the file &apos;.profile&apos; in your home directory; then log out and log in again.</span><br><span class="line"></span><br><span class="line">Here is that TZ value again, this time on standard output so that you</span><br><span class="line">can use the /usr/bin/tzselect command in shell scripts:</span><br><span class="line">Asia/Shanghai</span><br><span class="line">```     </span><br><span class="line"></span><br><span class="line">* 方案二：    </span><br><span class="line">`timedatectl`   </span><br><span class="line">直接设置中国-上海时区 `timedatectl set-timezone Asia/Shanghai`</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">----------------------------</span><br><span class="line">###### 键盘配置   </span><br><span class="line">`localectl set-keycap us`</span><br><span class="line"></span><br><span class="line">##### 高级配置</span><br><span class="line">###### 切换软件源</span><br><span class="line">&gt; [详情切花软件源网址](https://www.jianshu.com/p/541c737bc947)</span><br><span class="line"></span><br><span class="line">* 将软件源替换为阿里源   </span><br><span class="line">* 先进入源的目录   </span><br><span class="line">`cd /etc/yum.repo.d`</span><br><span class="line">* 备份一下官方源   </span><br><span class="line">`mv CentOS-Base.repo CentOS-Base.repo.bak`</span><br><span class="line">* 将阿里源文件下载下来  </span><br><span class="line">`wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo`</span><br><span class="line">* 重建源数据缓存  </span><br><span class="line">`yum clean all`</span><br><span class="line">`yum makecache`</span><br><span class="line"></span><br><span class="line">###### 设置域名解析地址</span><br><span class="line">&gt; [国内常用公共DNS服务器地址有哪些？](https://zhuanlan.zhihu.com/p/39406412)</span><br></pre></td></tr></table></figure><p>[root@localhost ~]# cat /etc/resolv.conf</p><h1 id="Generated-by-NetworkManager"><a href="#Generated-by-NetworkManager" class="headerlink" title="Generated by NetworkManager"></a>Generated by NetworkManager</h1><p>nameserver 114.114.114.114<br>nameserver 8.8.8.8</p><pre><code>###### 更改语言包##### 其他私有内网的linux获取出口公网地址命令   `curl ifconfig.me`    `curl ipinfo.io`##### 学习[SSH 安全加固](https://zzz.buzz/zh/2016/04/18/hardening-sshd/)   [centos 时区设置](https://www.jianshu.com/p/adefed4862a2)   [centos 时钟同步](https://cloud.tencent.com/developer/article/1444268)    [Linux系统扩展硬盘空间](https://www.jianshu.com/p/ba7090b1ef38)[Linux Kickstart 自动安装讲述anaconda-ks.cfg文件](http://liaoph.com/linux-kickstart/)[神技能 | 手把手教您把CentOS7服务器变成上网路由器](https://cloud.tencent.com/developer/article/1115169)#### 参考资料[树莓派4B 安装CentOS](https://www.cnblogs.com/Evan-fanfan/p/11520170.html)   [树莓派安装centos系统，并连接WiFi](https://blog.csdn.net/liuzhe465/article/details/76691345)     [为树莓派装上 CentOS 7 系统](https://zhuanlan.zhihu.com/p/33030757)   [SpecialInterestGroupAltArcharmhfp](https://wiki.centos.org/SpecialInterestGroup/AltArch/armhfp)     </code></pre>]]></content>
      
      
      
        <tags>
            
            <tag> 树莓派4B </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>raspberry-system-install</title>
      <link href="/2020/05/24/raspberry-system-install/"/>
      <url>/2020/05/24/raspberry-system-install/</url>
      
        <content type="html"><![CDATA[<p><a href="https://github.com/drgonroot/drgonroot.github.io/issues/new" target="_blank" rel="noopener">吐槽、建议、解惑入口网址</a></p><h4 id="树莓派4B系统"><a href="#树莓派4B系统" class="headerlink" title="树莓派4B系统"></a>树莓派4B系统</h4><blockquote><p><a href="https://www.raspberrypi.org/products/raspberry-pi-4-model-b/" target="_blank" rel="noopener">官网树莓派4B系统介绍</a><br>在安装其他Linux系统时需要注意下，树莓派CPU架构ARM，64位</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">root@raspberrypi:/etc/systemd/network# hostnamectl status</span><br><span class="line">   Static hostname: raspberrypi</span><br><span class="line">         Icon name: computer</span><br><span class="line">        Machine ID: 9321879165344d29ba552214ae2aca07</span><br><span class="line">           Boot ID: 67c2e9c17ee74d049301e40c99c70b58</span><br><span class="line">  Operating System: Raspbian GNU/Linux 10 (buster)</span><br><span class="line">            Kernel: Linux 4.19.97-v7l+</span><br><span class="line">      Architecture: arm</span><br></pre></td></tr></table></figure><p><img src="/images/pi4-labelled@2x.webp" alt="树莓派集成板"></p><h5 id="最基础硬件配置"><a href="#最基础硬件配置" class="headerlink" title="最基础硬件配置"></a>最基础硬件配置</h5><p><strong>必选配置</strong></p><ol><li>读卡器</li></ol><ul><li>和SD存储卡配合使用。应用于其他电脑将树莓派系统烧录到SD存储卡上</li></ul><ol start="2"><li>8G以上microSD(T-Flash)存储卡</li></ol><ul><li>存储树莓派系统</li><li>存储文件使用</li></ul><ol start="3"><li>树莓派4B集成板</li><li>5V-3A的Type-C的充电器</li></ol><hr><p><strong>可选配置</strong><br>5. 树莓派集成板散热贴片<br>6. 树莓派塑料外壳或者金属外壳<br>7. 小型散热风扇<br>8. micro-hdmi连接线</p><ul><li>用于输出页面到显示器上</li></ul><ol start="9"><li>等等</li></ol><a id="more"></a><h5 id="下载、烧录树莓派系统"><a href="#下载、烧录树莓派系统" class="headerlink" title="下载、烧录树莓派系统"></a>下载、烧录树莓派系统</h5><blockquote><p>Raspbian系统是用Debian专门为ARM卡片式计算机树莓派定制的版本。</p></blockquote><p><a href="https://www.raspberrypi.org/downloads/raspbian/" target="_blank" rel="noopener">官网系统下载地址</a></p><ul><li>树莓派桌面版和预装软件系统（Raspbian Buster with desktop and recommended software）</li><li>树莓派桌面版(不含预装软件)系统 （Raspbian Buster with desktop）</li><li>树莓派(不含桌面、不含预装软件)精简版 （Raspbian Buster Lite）</li></ul><p><a href="https://www.balena.io/etcher/" target="_blank" rel="noopener">推荐烧录SD软件Etcher</a><br>不合适使用Etcher，也可以使用树莓派自带烧录<a href="https://www.raspberrypi.org/downloads/noobs/" target="_blank" rel="noopener">NOOBS</a></p><ol><li>下载Raspbian树莓派系统</li></ol><ul><li>一般下载的是压缩包（如:zip）,需要进行解压，获取.img的镜像</li></ul><ol start="2"><li>将SD卡数据先清空，适当可以直接进行格式化</li><li>使用Etcher或者NOOBS或者SDFormater进行烧录</li><li>烧录完成，再次查看SD卡会发现boot命名存储卡</li></ol><ul><li>diskutil list</li></ul><h5 id="启动、访问树莓派系统方案"><a href="#启动、访问树莓派系统方案" class="headerlink" title="启动、访问树莓派系统方案"></a>启动、访问树莓派系统方案</h5><blockquote><p><a href="https://www.raspberrypi.org/documentation/remote-access/" target="_blank" rel="noopener">官网连接树莓派4B系统方案</a><br>树莓派raspbian:<br><code>系统用户名为:pi   密码:raspberry</code><br><code>root用户权限密码: raspberry</code></p></blockquote><ul><li>使用HDMI(<strong>High-Definition Multimedia Interface</strong>)显示器、鼠标、键盘进行访问系统</li><li>通过SSH(<strong>Secure SHell</strong>))访问树莓派</li><li>通过VNC(<strong>Virtual Network Computing</strong>)服务远程登录树莓派<a href="https://www.realvnc.com/en/connect/download/viewer/raspberrypi/" target="_blank" rel="noopener">VNC 客户端下载</a>。树莓派系统命令输入<code>vncserver -geometry 1422x800</code>启动vnc服务。<strong>注意设置好界面展示大小才能正常显示，不然为报·vnc cannot currently show the desktop·错误</strong></li></ul><p>桌面访问可以在命令行输入:<code>sudo raspi-cofig</code>进入树莓派系统配置界面。选择<code>5 Interfacing Options</code>进行配置默认启动应用程序SSH、VNC等</p><h6 id="SSH-访问接入网线rapibian系统"><a href="#SSH-访问接入网线rapibian系统" class="headerlink" title="SSH 访问接入网线rapibian系统"></a>SSH 访问接入网线rapibian系统</h6><ol><li>进入SD卡名称为<code>boot</code>文件夹</li></ol><ul><li>mac上: cd /Volumes/boot/</li></ul><ol start="2"><li><code>touch ssh</code>  生成一个ssh命名的文件</li><li>使用网线连接树莓派，查找树莓派的IP地址</li></ol><ul><li><p>命令输入: <code>ping raspberrypi.local</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">useheart@useheart Downloads % ping raspberrypi.local</span><br><span class="line">PING raspberrypi.local (192.168.1.6): 56 data bytes</span><br><span class="line">64 bytes from 192.168.1.6: icmp_seq=0 ttl=64 time=1.618 ms</span><br></pre></td></tr></table></figure></li><li><p>使用<a href="https://angryip.org/" target="_blank" rel="noopener">IP Scanner</a>软件进行扫描，找到对应树莓派IP地址</p></li></ul><ol start="4"><li>ssh <a href="mailto:pi@xxx.xxx.xxx.xx" target="_blank" rel="noopener">pi@xxx.xxx.xxx.xx</a></li></ol><h6 id="SSH-访问接入WIFI的rapibian系统"><a href="#SSH-访问接入WIFI的rapibian系统" class="headerlink" title="SSH 访问接入WIFI的rapibian系统"></a>SSH 访问接入WIFI的rapibian系统</h6><ol><li>进入SD卡名称为<code>boot</code>文件夹</li></ol><ul><li>mac上: cd /Volumes/boot/</li></ul><ol start="2"><li><p><code>touch ssh</code>  生成一个ssh命名的文件</p></li><li><p>新建wpa_supplicant.conf 文件，写入无限相关配置<br>如果无限网没有密码或者采用WEP加密方式的话，key_mgmt应设为NONE,密码字段由psk改成wep_key0即可。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">country=CN</span><br><span class="line">ctrl_interface=DIR=/var/run/wpa_supplicant GROUP=netdev</span><br><span class="line">update_config=1</span><br><span class="line">network=&#123;</span><br><span class="line">  ssid=&quot;wifi 名称&quot;</span><br><span class="line">  psk=&quot;wifi 密码&quot;</span><br><span class="line">  key_mgmt=WPA-PSK</span><br><span class="line">&#125;</span><br><span class="line">Network=&#123;</span><br><span class="line">  ssid=&quot;wifi 名称&quot;</span><br><span class="line">  psk=&quot;wifi 密码&quot;</span><br><span class="line">  key_mgmt=NONE</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>树莓派自动连接WIFI，查找树莓派的IP地址</p></li></ol><ul><li>命令输入: <code>ping raspberrypi.local</code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">useheart@useheart Downloads % ping raspberrypi.local</span><br><span class="line">PING raspberrypi.local (192.168.1.6): 56 data bytes</span><br><span class="line">64 bytes from 192.168.1.6: icmp_seq=0 ttl=64 time=1.618 ms</span><br></pre></td></tr></table></figure></li></ul><ol start="5"><li>ssh <a href="mailto:pi@xxx.xxx.xxx.xx" target="_blank" rel="noopener">pi@xxx.xxx.xxx.xx</a></li></ol><h5 id="修改pi账号密码和开启root账号"><a href="#修改pi账号密码和开启root账号" class="headerlink" title="修改pi账号密码和开启root账号"></a>修改pi账号密码和开启root账号</h5><p>&emsp;&emsp;修改pi账号的密码可以在之前的rasp-config中修改，也可以在pi用户登录之后在命令行终端输入password pi即可。<br>&emsp;&emsp;当需要root权限时，由默认账户经由sudo执行，Rassberry pi系统中的Raspbian默认用户是pi，密码为raspberry重新开启账号，可由pi用户登录后，在命令行下执行<br><code>sudo passwd root</code><br>&emsp;&emsp;执行此命令系统会提示输入两遍的root密码，输入你想设的密码即可，然后执行<br><code>sudo passwd --unlock root</code><br>这样root用户解锁成功。</p><h5 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h5><ul><li><p>查看树莓CPU温度</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 方法一</span><br><span class="line">pi@RaspberryPi:~ $ /opt/vc/bin/vcgencmd measure_temp</span><br><span class="line">temp=51.5&apos;C</span><br><span class="line"># 方法二</span><br><span class="line">pi@RaspberryPi:~ $ cat /sys/class/thermal/thermal_zone0/temp</span><br><span class="line">50464  #输出值除以1000，单位是℃。</span><br></pre></td></tr></table></figure></li><li><p>查看CPU详情</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /proc/cpuinfo</span><br></pre></td></tr></table></figure></li><li><p>查看CPU硬件架构</p><blockquote><p>在Linux中使用命令arch可以初步查看出当前系统所识别出来的机器CPU类型，如”i386”, “i486”,”i586”, “alpha”, “sparc”, “arm”, “m68k”,”mips”,”ppc”,”ia64”,”x86_64”等；ia64和x86_64就说明这台机器是64位的；</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@db ~]# arch</span><br><span class="line">i686</span><br><span class="line">[root@svr-db-test ~]# uname -m</span><br><span class="line">x86_64</span><br></pre></td></tr></table></figure></li></ul><h4 id="推荐阅读"><a href="#推荐阅读" class="headerlink" title="推荐阅读:"></a>推荐阅读:</h4><p><a href="https://zhuanlan.zhihu.com/p/59027897" target="_blank" rel="noopener">如何给树莓派安装操作系统</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> 树莓派4B </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mac常见问题和技巧</title>
      <link href="/2020/05/17/Mac%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E5%92%8C%E6%8A%80%E5%B7%A7/"/>
      <url>/2020/05/17/Mac%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E5%92%8C%E6%8A%80%E5%B7%A7/</url>
      
        <content type="html"><![CDATA[<p><a href="https://github.com/drgonroot/drgonroot.github.io/issues/new" target="_blank" rel="noopener">吐槽、建议、解惑入口网址</a></p><h5 id="常见技巧"><a href="#常见技巧" class="headerlink" title="常见技巧"></a>常见技巧</h5><h5 id="优秀软件"><a href="#优秀软件" class="headerlink" title="优秀软件"></a>优秀软件</h5><h6 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h6><p>新版MacOs Catalina推荐默认使用命令脚本zsh，而不是bash。<br>对于遇到 no matches的提示解决方案</p><blockquote><p>参考来源:<a href="https://www.bartbusschots.ie/s/2019/06/12/bash-to-zsh-file-globbing-and-no-matches-found-errors/" target="_blank" rel="noopener">Bash to Zsh: File Globbing and ‘no matches found’ Errors</a></p></blockquote><p>在 ~/.zshrc 文件上添加：<br><code># only throw errors when no globs match anything</code><br><code>setopt CSH_NULL_GLOB</code></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Charles使用细节说明</title>
      <link href="/2020/05/17/Charles%E4%BD%BF%E7%94%A8%E7%BB%86%E8%8A%82%E8%AF%B4%E6%98%8E/"/>
      <url>/2020/05/17/Charles%E4%BD%BF%E7%94%A8%E7%BB%86%E8%8A%82%E8%AF%B4%E6%98%8E/</url>
      
        <content type="html"><![CDATA[<p><a href="https://github.com/drgonroot/drgonroot.github.io/issues/new" target="_blank" rel="noopener">吐槽、建议、解惑入口网址</a></p><p>Charles是一款优秀HTTPS/HTTP网络代理工具</p><blockquote><p><a href="https://www.charlesproxy.com" target="_blank" rel="noopener">Charles官网地址</a><br><a href="https://xclient.info/s/charles.html" target="_blank" rel="noopener">Charles下载地址</a></p></blockquote><h4 id="Charles-gt-Map-Remote-Setting-gt-Edit-Mapping中preserve-host-in-header-fields的使用"><a href="#Charles-gt-Map-Remote-Setting-gt-Edit-Mapping中preserve-host-in-header-fields的使用" class="headerlink" title="Charles -&gt; Map Remote Setting -&gt; Edit Mapping中preserve host in header fields的使用"></a>Charles -&gt; Map Remote Setting -&gt; Edit Mapping中preserve host in header fields的使用</h4><p><img src="/images/Charles%E4%BF%9D%E6%8A%A4HostHeaderfields%E4%B8%80.png" alt="Charles 不勾选">  </p><p><img src="/images/Charles%E4%BF%9D%E6%8A%A4HostHeaderFileds%E4%BA%8C.png" alt="Charles 勾选"></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Java命令系列-javac</title>
      <link href="/2020/05/16/Java%E5%91%BD%E4%BB%A4%E7%B3%BB%E5%88%97-javac/"/>
      <url>/2020/05/16/Java%E5%91%BD%E4%BB%A4%E7%B3%BB%E5%88%97-javac/</url>
      
        <content type="html"><![CDATA[<p><a href="https://github.com/drgonroot/drgonroot.github.io/issues/new" target="_blank" rel="noopener">吐槽、建议、解惑入口网址</a></p><h4 id="javac-命令详解"><a href="#javac-命令详解" class="headerlink" title="javac 命令详解"></a>javac 命令详解</h4><blockquote><p>javac (java compiler)(java源码编译器)，将源码代码(.java)编译成字节码文件(.class)。</p></blockquote><p><em>备注:</em><br><code>在MyClass中的MyInerClass内部类,编译后生成MyClass$MyInnerClass.class</code></p><h4 id="javac-命令使用"><a href="#javac-命令使用" class="headerlink" title="javac 命令使用"></a>javac 命令使用</h4><p>javac [<code>命令参数</code>] [<code>单个源码文件</code>] [<code>多个源码文件(空格分隔,eg: MyClassA.java  MyClassB.java</code>)] [<code>多个源码文件路径组成的文件(eg: @recordSourceFile</code>)]</p><p>javac命令执行会自动识别当前路径。</p><h5 id="使用javac样例"><a href="#使用javac样例" class="headerlink" title="使用javac样例"></a>使用javac样例</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">// 编译一个类</span><br><span class="line">useheart@useheart JavaCompiler % javac src/main/java/multi/TestMainOne.java</span><br><span class="line">// 编译多个类</span><br><span class="line">useheart@useheart JavaCompiler % javac src/main/java/multi/TestMainOne.java src/main/java/multi/TestMainTwo.java src/main/java/multi/TestMainThree.java</span><br><span class="line">// 显示编译后class,自动放入在被编译文件路径下</span><br><span class="line">useheart@useheart JavaCompiler % cd src/main/java/multi</span><br><span class="line">useheart@useheart multi % ll</span><br><span class="line">total 48</span><br><span class="line">-rw-r--r--  1 useheart  staff  430  5 17 18:18 TestMainOne.class</span><br><span class="line">-rw-r--r--  1 useheart  staff  203  5 17 18:02 TestMainOne.java</span><br><span class="line">-rw-r--r--  1 useheart  staff  436  5 17 18:18 TestMainThree.class</span><br><span class="line">-rw-r--r--  1 useheart  staff  207  5 17 18:02 TestMainThree.java</span><br><span class="line">-rw-r--r--  1 useheart  staff  430  5 17 18:18 TestMainTwo.class</span><br><span class="line">-rw-r--r--  1 useheart  staff  203  5 17 18:02 TestMainTwo.java</span><br><span class="line">useheart@useheart multi %</span><br></pre></td></tr></table></figure><a id="more"></a><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">// 显示Java路径文件</span><br><span class="line">useheart@useheart compile % cat javaPaths</span><br><span class="line">../src/main/java/multi/TestMainOne.java</span><br><span class="line">../src/main/java/multi/TestMainTwo.java</span><br><span class="line">../src/main/java/multi/TestMainThree.java</span><br><span class="line">// 编译文件里面的java类</span><br><span class="line">useheart@useheart compile % javac @javaPaths</span><br><span class="line">// 显示编译后的class文件</span><br><span class="line">useheart@useheart compile % cd ../src/main/java/multi</span><br><span class="line">useheart@useheart multi % ll</span><br><span class="line">total 48</span><br><span class="line">-rw-r--r--  1 useheart  staff  430  5 17 18:29 TestMainOne.class</span><br><span class="line">-rw-r--r--  1 useheart  staff  203  5 17 18:02 TestMainOne.java</span><br><span class="line">-rw-r--r--  1 useheart  staff  436  5 17 18:29 TestMainThree.class</span><br><span class="line">-rw-r--r--  1 useheart  staff  207  5 17 18:02 TestMainThree.java</span><br><span class="line">-rw-r--r--  1 useheart  staff  430  5 17 18:29 TestMainTwo.class</span><br><span class="line">-rw-r--r--  1 useheart  staff  203  5 17 18:02 TestMainTwo.java</span><br></pre></td></tr></table></figure><h5 id="javac-常用的命令参数"><a href="#javac-常用的命令参数" class="headerlink" title="javac 常用的命令参数"></a>javac 常用的命令参数</h5><p>使用案例:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// 参数 -d</span><br><span class="line">useheart@useheart JavaCompiler % javac -d compile/classes  src/main/java/multi/*.java</span><br><span class="line"></span><br><span class="line">useheart@useheart JavaCompiler % ll compile/classes/multi</span><br><span class="line">total 24</span><br><span class="line">-rw-r--r--  1 useheart  staff  430  5 17 19:02 TestMainOne.class</span><br><span class="line">-rw-r--r--  1 useheart  staff  436  5 17 19:02 TestMainThree.class</span><br><span class="line">-rw-r--r--  1 useheart  staff  430  5 17 19:02 TestMainTwo.class</span><br></pre></td></tr></table></figure><h6 id="sourcepath-和-classpath-的使用"><a href="#sourcepath-和-classpath-的使用" class="headerlink" title="sourcepath 和 classpath 的使用"></a>sourcepath 和 classpath 的使用</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">//JarCompileBootstrap编译时需要使用其他文件Java类文件compile.ExternalUseClass和第三方class文件jar(commons-lang3-3.9.jar)</span><br><span class="line">useheart@useheart JarCompiler % javac -sourcepath ./src/main/java  -classpath /Users/useheart/.m2/repository/org/apache/commons/commons-lang3/3.9/commons-lang3-3.9.jar  src/main/java/JarCompileBootstrap.java</span><br><span class="line"></span><br><span class="line">useheart@useheart JarCompiler % ll src/main/java</span><br><span class="line">total 16</span><br><span class="line">-rw-r--r--  1 useheart  staff  677  5 17 19:25 JarCompileBootstrap.class</span><br><span class="line">-rw-r--r--  1 useheart  staff  502  5 17 17:51 JarCompileBootstrap.java</span><br><span class="line">drwxr-xr-x  4 useheart  staff  128  5 17 19:25 compile</span><br></pre></td></tr></table></figure><h6 id="源码发行版-和-虚拟机使用目标发行版"><a href="#源码发行版-和-虚拟机使用目标发行版" class="headerlink" title="源码发行版 和 虚拟机使用目标发行版"></a>源码发行版 和 虚拟机使用目标发行版</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">useheart@useheart JavaCompiler % javac -d compile/classes -target 1.8 -source 1.8 -encoding utf-8 -version  src/main/java/multi/*.java</span><br><span class="line">javac 1.8.0_211</span><br></pre></td></tr></table></figure><h6 id="parameters"><a href="#parameters" class="headerlink" title="-parameters"></a>-parameters</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">useheart@useheart JarCompiler % javac -parameters  -sourcepath ./src/main/java  -classpath /Users/useheart/.m2/repository/org/apache/commons/commons-lang3/3.9/commons-lang3-3.9.jar  src/main/java/JarCompileBootstrap.java</span><br><span class="line"></span><br><span class="line">// 反编译结果</span><br><span class="line">import compile.ExternalUseClass;</span><br><span class="line">import org.apache.commons.lang3.StringUtils;</span><br><span class="line"></span><br><span class="line">public class JarCompileBootstrap &#123;</span><br><span class="line">    public JarCompileBootstrap() &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //-parameters 使用参数名args保持原样，没有是-parameters，参数名会是var0.</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        System.out.println(StringUtils.trim(&quot;引入commons-lang3 编译使用&quot;));</span><br><span class="line">        ExternalUseClass var1 = new ExternalUseClass();</span><br><span class="line">        var1.external();</span><br><span class="line">        System.out.println(&quot;Bootstrap 启动&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h6 id="verbose"><a href="#verbose" class="headerlink" title="-verbose"></a>-verbose</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">useheart@useheart JavaCompiler % javac -verbose  src/main/java/multi/TestMainOne.java</span><br><span class="line">[解析开始时间 RegularFileObject[src/main/java/multi/TestMainOne.java]]</span><br><span class="line">[解析已完成, 用时 14 毫秒]</span><br><span class="line">[源文件的搜索路径: /opt/apache-jmeter-5.2.1/lib/ext/ApacheJMeter_core.jar,/opt/apache-jmeter-5.2.1/lib/jorphan.jar,/opt/apache-jmeter-5.2.1/lib/logkit-2.0.jar,/Library/Java/JavaVirtualMachines/jdk1.8.0_211.jdk/Contents/Home/lib/tools.jar,/Library/Java/JavaVirtualMachines/jdk1.8.0_211.jdk/Contents/Home/lib/dt.jar,.]</span><br><span class="line">[类文件的搜索路径: /Library/Java/JavaVirtualMachines/jdk1.8.0_211.jdk/Contents/Home/jre/lib/resources.jar,/Library/Java/JavaVirtualMachines/jdk1.8.0_211.jdk/Contents/Home/jre/lib/rt.jar,/Library/Java/JavaVirtualMachines/jdk1.8.0_211.jdk/Contents/Home/jre/lib/sunrsasign.jar,/Library/Java/JavaVirtualMachines/jdk1.8.0_211.jdk/Contents/Home/jre/lib/jsse.jar,/Library/Java/JavaVirtualMachines/jdk1.8.0_211.jdk/Contents/Home/jre/lib/jce.jar,/Library/Java/JavaVirtualMachines/jdk1.8.0_211.jdk/Contents/Home/jre/lib/charsets.jar,/Library/Java/JavaVirtualMachines/jdk1.8.0_211.jdk/Contents/Home/jre/lib/jfr.jar,/Library/Java/JavaVirtualMachines/jdk1.8.0_211.jdk/Contents/Home/jre/classes,/Library/Java/JavaVirtualMachines/jdk1.8.0_211.jdk/Contents/Home/jre/lib/ext/sunec.jar,/Library/Java/JavaVirtualMachines/jdk1.8.0_211.jdk/Contents/Home/jre/lib/ext/nashorn.jar,/Library/Java/JavaVirtualMachines/jdk1.8.0_211.jdk/Contents/Home/jre/lib/ext/cldrdata.jar,/Library/Java/JavaVirtualMachines/jdk1.8.0_211.jdk/Contents/Home/jre/lib/ext/jfxrt.jar,/Library/Java/JavaVirtualMachines/jdk1.8.0_211.jdk/Contents/Home/jre/lib/ext/dnsns.jar,/Library/Java/JavaVirtualMachines/jdk1.8.0_211.jdk/Contents/Home/jre/lib/ext/localedata.jar,/Library/Java/JavaVirtualMachines/jdk1.8.0_211.jdk/Contents/Home/jre/lib/ext/sunjce_provider.jar,/Library/Java/JavaVirtualMachines/jdk1.8.0_211.jdk/Contents/Home/jre/lib/ext/sunpkcs11.jar,/Library/Java/JavaVirtualMachines/jdk1.8.0_211.jdk/Contents/Home/jre/lib/ext/jaccess.jar,/Library/Java/JavaVirtualMachines/jdk1.8.0_211.jdk/Contents/Home/jre/lib/ext/zipfs.jar,/System/Library/Java/Extensions/MRJToolkit.jar,/opt/apache-jmeter-5.2.1/lib/ext/ApacheJMeter_core.jar,/opt/apache-jmeter-5.2.1/lib/jorphan.jar,/opt/apache-jmeter-5.2.1/lib/logkit-2.0.jar,/Library/Java/JavaVirtualMachines/jdk1.8.0_211.jdk/Contents/Home/lib/tools.jar,/Library/Java/JavaVirtualMachines/jdk1.8.0_211.jdk/Contents/Home/lib/dt.jar,.]</span><br><span class="line">[正在加载ZipFileIndexFileObject[/Library/Java/JavaVirtualMachines/jdk1.8.0_211.jdk/Contents/Home/lib/ct.sym(META-INF/sym/rt.jar/java/lang/Object.class)]]</span><br><span class="line">[正在加载ZipFileIndexFileObject[/Library/Java/JavaVirtualMachines/jdk1.8.0_211.jdk/Contents/Home/lib/ct.sym(META-INF/sym/rt.jar/java/lang/String.class)]]</span><br><span class="line">[正在检查multi.TestMainOne]</span><br><span class="line">[正在加载ZipFileIndexFileObject[/Library/Java/JavaVirtualMachines/jdk1.8.0_211.jdk/Contents/Home/lib/ct.sym(META-INF/sym/rt.jar/java/io/Serializable.class)]]</span><br><span class="line">[正在加载ZipFileIndexFileObject[/Library/Java/JavaVirtualMachines/jdk1.8.0_211.jdk/Contents/Home/lib/ct.sym(META-INF/sym/rt.jar/java/lang/AutoCloseable.class)]]</span><br><span class="line">[正在加载ZipFileIndexFileObject[/Library/Java/JavaVirtualMachines/jdk1.8.0_211.jdk/Contents/Home/lib/ct.sym(META-INF/sym/rt.jar/java/lang/Byte.class)]]</span><br><span class="line">[正在加载ZipFileIndexFileObject[/Library/Java/JavaVirtualMachines/jdk1.8.0_211.jdk/Contents/Home/lib/ct.sym(META-INF/sym/rt.jar/java/lang/Character.class)]]</span><br><span class="line">[正在加载ZipFileIndexFileObject[/Library/Java/JavaVirtualMachines/jdk1.8.0_211.jdk/Contents/Home/lib/ct.sym(META-INF/sym/rt.jar/java/lang/Short.class)]]</span><br><span class="line">[正在加载ZipFileIndexFileObject[/Library/Java/JavaVirtualMachines/jdk1.8.0_211.jdk/Contents/Home/lib/ct.sym(META-INF/sym/rt.jar/java/lang/Long.class)]]</span><br><span class="line">[正在加载ZipFileIndexFileObject[/Library/Java/JavaVirtualMachines/jdk1.8.0_211.jdk/Contents/Home/lib/ct.sym(META-INF/sym/rt.jar/java/lang/Float.class)]]</span><br><span class="line">[正在加载ZipFileIndexFileObject[/Library/Java/JavaVirtualMachines/jdk1.8.0_211.jdk/Contents/Home/lib/ct.sym(META-INF/sym/rt.jar/java/lang/Integer.class)]]</span><br><span class="line">[正在加载ZipFileIndexFileObject[/Library/Java/JavaVirtualMachines/jdk1.8.0_211.jdk/Contents/Home/lib/ct.sym(META-INF/sym/rt.jar/java/lang/Double.class)]]</span><br><span class="line">[正在加载ZipFileIndexFileObject[/Library/Java/JavaVirtualMachines/jdk1.8.0_211.jdk/Contents/Home/lib/ct.sym(META-INF/sym/rt.jar/java/lang/Boolean.class)]]</span><br><span class="line">[正在加载ZipFileIndexFileObject[/Library/Java/JavaVirtualMachines/jdk1.8.0_211.jdk/Contents/Home/lib/ct.sym(META-INF/sym/rt.jar/java/lang/Void.class)]]</span><br><span class="line">[正在加载ZipFileIndexFileObject[/Library/Java/JavaVirtualMachines/jdk1.8.0_211.jdk/Contents/Home/lib/ct.sym(META-INF/sym/rt.jar/java/lang/System.class)]]</span><br><span class="line">[正在加载ZipFileIndexFileObject[/Library/Java/JavaVirtualMachines/jdk1.8.0_211.jdk/Contents/Home/lib/ct.sym(META-INF/sym/rt.jar/java/io/PrintStream.class)]]</span><br><span class="line">[正在加载ZipFileIndexFileObject[/Library/Java/JavaVirtualMachines/jdk1.8.0_211.jdk/Contents/Home/lib/ct.sym(META-INF/sym/rt.jar/java/lang/Appendable.class)]]</span><br><span class="line">[正在加载ZipFileIndexFileObject[/Library/Java/JavaVirtualMachines/jdk1.8.0_211.jdk/Contents/Home/lib/ct.sym(META-INF/sym/rt.jar/java/io/Closeable.class)]]</span><br><span class="line">[正在加载ZipFileIndexFileObject[/Library/Java/JavaVirtualMachines/jdk1.8.0_211.jdk/Contents/Home/lib/ct.sym(META-INF/sym/rt.jar/java/io/FilterOutputStream.class)]]</span><br><span class="line">[正在加载ZipFileIndexFileObject[/Library/Java/JavaVirtualMachines/jdk1.8.0_211.jdk/Contents/Home/lib/ct.sym(META-INF/sym/rt.jar/java/io/OutputStream.class)]]</span><br><span class="line">[正在加载ZipFileIndexFileObject[/Library/Java/JavaVirtualMachines/jdk1.8.0_211.jdk/Contents/Home/lib/ct.sym(META-INF/sym/rt.jar/java/io/Flushable.class)]]</span><br><span class="line">[正在加载ZipFileIndexFileObject[/Library/Java/JavaVirtualMachines/jdk1.8.0_211.jdk/Contents/Home/lib/ct.sym(META-INF/sym/rt.jar/java/lang/Comparable.class)]]</span><br><span class="line">[正在加载ZipFileIndexFileObject[/Library/Java/JavaVirtualMachines/jdk1.8.0_211.jdk/Contents/Home/lib/ct.sym(META-INF/sym/rt.jar/java/lang/CharSequence.class)]]</span><br><span class="line">[已写入RegularFileObject[src/main/java/multi/TestMainOne.class]]</span><br><span class="line">[共 161 毫秒]</span><br><span class="line">useheart@useheart JavaCompiler %</span><br></pre></td></tr></table></figure><h4 id="javac-help-文档输出"><a href="#javac-help-文档输出" class="headerlink" title="javac  help 文档输出"></a>javac  help 文档输出</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">useheart@useheart multi % javac -help</span><br><span class="line">用法: javac &lt;options&gt; &lt;source files&gt;</span><br><span class="line">  -g                         生成所有调试信息</span><br><span class="line">  -nowarn                    不生成任何警告</span><br><span class="line">  -verbose                   输出有关编译器正在执行的操作的消息</span><br><span class="line">  -deprecation               输出使用已过时的 API 的源位置</span><br><span class="line">  -classpath &lt;路径&gt;            指定查找用户类文件和注释处理程序的位置</span><br><span class="line">  -cp &lt;路径&gt;                   指定查找用户类文件和注释处理程序的位置</span><br><span class="line">  -sourcepath &lt;路径&gt;           指定查找输入源文件的位置</span><br><span class="line">  -parameters                生成元数据以用于方法参数的反射</span><br><span class="line">  -d &lt;目录&gt;                    指定放置生成的类文件的位置</span><br><span class="line">  -encoding &lt;编码&gt;             指定源文件使用的字符编码</span><br><span class="line">  -source &lt;发行版&gt;             提供与指定发行版的源兼容性</span><br><span class="line">  -target &lt;发行版&gt;             生成特定 VM 版本的类文件</span><br><span class="line">  -version                   版本信息</span><br><span class="line">  -help                      输出标准选项的提要</span><br><span class="line">  @&lt;文件名&gt;                     从文件读取选项和文件名</span><br></pre></td></tr></table></figure><h4 id="执行（man-javac）文档"><a href="#执行（man-javac）文档" class="headerlink" title="执行（man javac）文档"></a>执行（man javac）文档</h4><p><a href="/files/man-javac.txt">javac英文文档</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> 后端 </tag>
            
            <tag> Java命令 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>人人都该懂点产品思维（一）</title>
      <link href="/2020/04/25/%E4%BA%BA%E4%BA%BA%E9%83%BD%E8%AF%A5%E6%87%82%E7%82%B9%E4%BA%A7%E5%93%81%E6%80%9D%E7%BB%B4%EF%BC%88%E4%B8%80%EF%BC%89/"/>
      <url>/2020/04/25/%E4%BA%BA%E4%BA%BA%E9%83%BD%E8%AF%A5%E6%87%82%E7%82%B9%E4%BA%A7%E5%93%81%E6%80%9D%E7%BB%B4%EF%BC%88%E4%B8%80%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p><a href="https://github.com/drgonroot/drgonroot.github.io/issues/new" target="_blank" rel="noopener">吐槽、建议、解惑入口网址</a></p><h3 id="推荐语"><a href="#推荐语" class="headerlink" title="推荐语"></a>推荐语</h3><p>&emsp;&emsp;本书以生动的笔触，以场景代入的方法，从是什么、为什么、怎么样介绍了一名产品经理的必备素质以及专业技能，对竞品分析、A/B测试、数据分析、PRD撰写、埋点、搜索、推送等做了深入阐述，每一部分都既有理论说明，又有实例分析，深入浅出，面面俱到。此外，还指出了在做好产品经理这一角色时必须具备的职业能力以及技巧，如关注APP榜单、高效会议、跟进进度，甚至专业邮件撰写方法。总结出来的方法论，如六步法：用、问、数、比、溯、试，非常精炼又极其其实用，对实际工作很有指导作用。</p><h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><h4 id="17页"><a href="#17页" class="headerlink" title="17页"></a>17页</h4><p>&emsp;&emsp;转载一段看来的关于价值投资的判断，我觉得同样适用于个人的职业选择：</p><ul><li>这是不是一家全方位领先竞争者的公司？（现在）</li><li>这是不是一个快速增长、有着清晰增长路线图的公司？（未来）</li><li>这是不是总体上在你的认知范围内最佳选择？（有效前沿）</li></ul><h3 id="第一章："><a href="#第一章：" class="headerlink" title="第一章："></a>第一章：</h3><h4 id="005页"><a href="#005页" class="headerlink" title="005页"></a>005页</h4><p>&emsp;&emsp;对于没有丰富经验的产品小白而言，由于没有负责过大项目，做的很多事情都偏向于执行，所以面试中并不会过多纠结过往的项目（行业认知），更多考查的是解决问题的思路、遇到挑战时的应对和分析。对于问题的回答并不要求面面俱到，而是希望在有限时间里，应试者能够展现出自己是如何拆解问题、做重要优先级划分的，并争取做到逻辑自洽。</p><h4 id="008页"><a href="#008页" class="headerlink" title="008页"></a>008页</h4><p>&emsp;&emsp;这款App核心卖点在于实时美颜，调研相机的同时，就在进行美白和瘦脸的操作，用户就不需要拍照后在P图了。<strong>把两步变成一步，路径的缩短就带来了产品价值</strong>。</p><p>&emsp;&emsp;作为产品经理，需要对市场保持足够的敏感。有哪些新的、热的应用，就算不是我们的竞品领域，同样也需要关注。<strong>他山之石可以攻玉，它们或许能够给我们带来不一样的想法</strong>。</p>]]></content>
      
      
      
        <tags>
            
            <tag> 读书 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>公司基础知识了解文档</title>
      <link href="/2020/04/19/%E5%85%AC%E5%8F%B8%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E4%BA%86%E8%A7%A3%E6%96%87%E6%A1%A3/"/>
      <url>/2020/04/19/%E5%85%AC%E5%8F%B8%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E4%BA%86%E8%A7%A3%E6%96%87%E6%A1%A3/</url>
      
        <content type="html"><![CDATA[<p><a href="https://github.com/drgonroot/drgonroot.github.io/issues/new" target="_blank" rel="noopener">吐槽、建议、解惑入口网址</a></p><h1 id="公司"><a href="#公司" class="headerlink" title="公司"></a>公司</h1><p>公司是企业法人，有独立的法人财产，享有法人财产。公司以其全部财产对公司的债务承担责任。<br>公司是指以营利为目的，从事商业经营活动或达到某些目的而成立的组织。</p><h2 id="公司类型"><a href="#公司类型" class="headerlink" title="公司类型"></a>公司类型</h2><h3 id="有限责任公司"><a href="#有限责任公司" class="headerlink" title="有限责任公司"></a>有限责任公司</h3><p>有限责任公司的股东以其认缴的出资额为限对公司承担责任。</p><h3 id="股份有限公司"><a href="#股份有限公司" class="headerlink" title="股份有限公司"></a>股份有限公司</h3><p>股份有限公司的股东以其认购的股份为限对公司承担责任。</p><h2 id="许可证"><a href="#许可证" class="headerlink" title="许可证"></a>许可证</h2><h3 id="营业执照"><a href="#营业执照" class="headerlink" title="营业执照"></a>营业执照</h3><p>营业执照签发日期为公司成立日期。<br>公司营业执照应当载明公司的名称、住所、注册资本、经营范围、法定代表人姓名等事项。</p><h3 id="互联网企业"><a href="#互联网企业" class="headerlink" title="互联网企业"></a>互联网企业</h3><p>参考:<a href="https://zhuanlan.zhihu.com/p/30892634" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/30892634</a></p><ul><li>网络文化经营许可证</li><li>增值电信业务经营许可证（简称ICP）</li></ul><a id="more"></a><h2 id="公司章程"><a href="#公司章程" class="headerlink" title="公司章程"></a>公司章程</h2><p>公司章程对公司、股东、董事、监事、高级管理人员具有约束力。</p><h3 id="公司名称和住所"><a href="#公司名称和住所" class="headerlink" title="公司名称和住所"></a>公司名称和住所</h3><h3 id="公司经营范围"><a href="#公司经营范围" class="headerlink" title="公司经营范围"></a>公司经营范围</h3><h3 id="公司注册资本"><a href="#公司注册资本" class="headerlink" title="公司注册资本"></a>公司注册资本</h3><ul><li>认缴机制</li><li>有限责任公司破产清算，股东最高赔本资金</li></ul><h3 id="股东姓名或者名称"><a href="#股东姓名或者名称" class="headerlink" title="股东姓名或者名称"></a>股东姓名或者名称</h3><h3 id="股东的出资方式、出资额和出资时间"><a href="#股东的出资方式、出资额和出资时间" class="headerlink" title="股东的出资方式、出资额和出资时间"></a>股东的出资方式、出资额和出资时间</h3><h3 id="公司的机构及其产生办法、职权、议事规则"><a href="#公司的机构及其产生办法、职权、议事规则" class="headerlink" title="公司的机构及其产生办法、职权、议事规则"></a>公司的机构及其产生办法、职权、议事规则</h3><h3 id="法定代表人"><a href="#法定代表人" class="headerlink" title="法定代表人"></a>法定代表人</h3><h3 id="股东会会议认为需要规定的其他事项"><a href="#股东会会议认为需要规定的其他事项" class="headerlink" title="股东会会议认为需要规定的其他事项"></a>股东会会议认为需要规定的其他事项</h3><h2 id="出资证明书"><a href="#出资证明书" class="headerlink" title="出资证明书"></a>出资证明书</h2><p>有限责任公司成立后，应当向股东签发出资证明书</p><h3 id="公司名称"><a href="#公司名称" class="headerlink" title="公司名称"></a>公司名称</h3><h3 id="公司成立日期"><a href="#公司成立日期" class="headerlink" title="公司成立日期"></a>公司成立日期</h3><h3 id="公司注册资本-1"><a href="#公司注册资本-1" class="headerlink" title="公司注册资本"></a>公司注册资本</h3><h3 id="股东姓名或者名称、缴纳的出资额和出资日期"><a href="#股东姓名或者名称、缴纳的出资额和出资日期" class="headerlink" title="股东姓名或者名称、缴纳的出资额和出资日期"></a>股东姓名或者名称、缴纳的出资额和出资日期</h3><h3 id="出资证明书的编号和核发日期"><a href="#出资证明书的编号和核发日期" class="headerlink" title="出资证明书的编号和核发日期"></a>出资证明书的编号和核发日期</h3><h2 id="子公司"><a href="#子公司" class="headerlink" title="子公司"></a>子公司</h2><h2 id="公司解散"><a href="#公司解散" class="headerlink" title="公司解散"></a>公司解散</h2><p>公司在经营发展过程中，会因章程约定的经营期限届满、解散事由发生、股东（大）会决议而主动解散；也会因政府机关的责令撤销、关闭、吊销营业执照等行政行为、法院的解散判决而被迫解散，由此进入公司清算。<br>公司解散原因：<br>（一）公司章程规定的营业期限届满或者公司章程规定的其他解散事由出现；（二）股东会或者股东大会决议解散；（三）因公司合并或者分立需要解散；（四）依法被吊销营业执照、责令关闭或者被撤销；<br>（五）人民法院依照本法第一百八十二条的规定予以解散。<br>《公司法》第一百八十二条规定，公司经营管理发生严重困难，继续存续会使股东利益受到重大损失，通过其他途径不能解决的，持有公司全部股东表决权百分之十以上的股东，可以请求人民法院解散公司。<br>参考法律：公司法  公司破产法  劳动法</p><h3 id="未及时进行清算危害"><a href="#未及时进行清算危害" class="headerlink" title="未及时进行清算危害"></a>未及时进行清算危害</h3><ul><li>不及时清算股东和法人将承担巨大法律责任，股东连带责任</li><li>对法定代表人的不利影响</li><li>股东及公司的巨大税务风险</li></ul><h3 id="公司清算"><a href="#公司清算" class="headerlink" title="公司清算"></a>公司清算</h3><p>公司清算是指以解散公司为目的，而清理公司现有债权债务，分配剩余财产，了结公司各类法律关系的程序和制度。<br>参考:<a href="https://zhuanlan.zhihu.com/p/34789930" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/34789930</a></p><ul><li><p>自行清算</p><ul><li>公司自行自行成立清算组</li></ul></li><li><p>强制清算</p><ul><li>债权人向法院申请某公司成立清算组</li><li>由法院成立清算组</li></ul></li><li><p>破产清算</p><ul><li>公司资不抵债</li><li>公司协调债权人债务无果</li><li>债务人向法院申请破产</li></ul></li></ul><h3 id="企业注销"><a href="#企业注销" class="headerlink" title="企业注销"></a>企业注销</h3><ul><li>工商注销备案</li><li>注销登报公告</li><li>注销公司国、地税登记证</li><li>工商注销</li><li>注销代码证</li><li>银行注销</li><li><img src="/images/%E4%BC%81%E4%B8%9A%E6%B3%A8%E9%94%80%E6%B5%81%E7%A8%8B.png" alt="企业注销流程"></li></ul><h2 id="企业行为"><a href="#企业行为" class="headerlink" title="企业行为"></a>企业行为</h2><h3 id="会议"><a href="#会议" class="headerlink" title="会议"></a>会议</h3><ul><li>股东大会</li><li>董事会</li><li>监事会</li></ul><h3 id="股权融资"><a href="#股权融资" class="headerlink" title="股权融资"></a>股权融资</h3><h3 id="公司债券"><a href="#公司债券" class="headerlink" title="公司债券"></a>公司债券</h3><h3 id="投资"><a href="#投资" class="headerlink" title="投资"></a>投资</h3><p>一般来说，不得成为对所投资企业的债务承担连带责任的出资人。<br>       公司向其他企业投资或者为他人提供担保，依照公司章程的规定，由董事会或者股东会、股东大会决议；公司章程对投资或者担保的总额及单项投资或者担保的数额有限额规定的，不得超过规定的限额。<br>      公司为公司股东或者实际控制人提供担保的，必须经股东会或者股东大会决议。<br>     前款规定的股东或者受前款规定的实际控制人支配的股东，不得参加前款规定事项的表决。该项表决由出席会议的其他股东所持表决权的过半数通过。</p><h2 id="人事划分"><a href="#人事划分" class="headerlink" title="人事划分"></a>人事划分</h2><h3 id="创始人"><a href="#创始人" class="headerlink" title="创始人"></a>创始人</h3><h3 id="股东"><a href="#股东" class="headerlink" title="股东"></a>股东</h3><p>公司股东依法享有资产收益、参与重大决策的选择管理等权利</p><h3 id="投资人"><a href="#投资人" class="headerlink" title="投资人"></a>投资人</h3><h3 id="法人"><a href="#法人" class="headerlink" title="法人"></a>法人</h3><h3 id="董事"><a href="#董事" class="headerlink" title="董事"></a>董事</h3><ul><li>董事长</li></ul><h3 id="监事"><a href="#监事" class="headerlink" title="监事"></a>监事</h3><ul><li>主席</li></ul><h3 id="经理"><a href="#经理" class="headerlink" title="经理"></a>经理</h3><ul><li>总经理</li></ul><h3 id="高级管理人员"><a href="#高级管理人员" class="headerlink" title="高级管理人员"></a>高级管理人员</h3><h2 id="股权架构"><a href="#股权架构" class="headerlink" title="股权架构"></a>股权架构</h2><p>参考:<a href="http://www.scgslaw.com/2018/clswj_0918/367.html" target="_blank" rel="noopener">http://www.scgslaw.com/2018/clswj_0918/367.html</a></p><h3 id="合伙人选择"><a href="#合伙人选择" class="headerlink" title="合伙人选择"></a>合伙人选择</h3><ul><li><p>有创业心态</p></li><li><p>有创业能力</p></li><li><p>有3-5年全职投入预期</p></li><li><p>错误选择方式</p><ul><li>资源承诺者</li><li>兼职人员</li><li>天使投资人</li><li>早期普通员工</li></ul></li></ul><h3 id="合伙人股权分配"><a href="#合伙人股权分配" class="headerlink" title="合伙人股权分配"></a>合伙人股权分配</h3><ul><li><p>股权分配本质问题</p><p>一个是如何利用一个合理的股权结构保证创始人对公司的控制力，<br>一个是通过股权分配帮助公司获取更多资源，包括找到有实力的合伙人和投资人。</p><ul><li>创始人对公司决定控制力</li><li>吸收更多优秀资源</li></ul></li><li><p>股权分配规则尽早落地</p></li><li><p>股权分配机制</p><ul><li><p>持股人员</p><ul><li>公司合伙人</li><li>员工</li><li>公司外部顾问</li><li>投资方</li></ul></li></ul></li><li><p>合伙人股权代持</p></li><li><p>股权绑定</p></li><li><p>早期公司资金紧张，公司欠条兑现合伙人工资，后续补发工资</p></li></ul><h3 id="合伙人股权退出机制"><a href="#合伙人股权退出机制" class="headerlink" title="合伙人股权退出机制"></a>合伙人股权退出机制</h3><ul><li>提前约定退出机制，管理好合伙人预期</li><li>股东中途退出，股权溢价回购</li><li>设定高额违约金条款</li></ul><h2 id="公司组织"><a href="#公司组织" class="headerlink" title="公司组织"></a>公司组织</h2><h3 id="股东会"><a href="#股东会" class="headerlink" title="股东会"></a>股东会</h3><p>有限责任公司股东会由全体股东组成。股东会是公司的权力机构，依照本法行使职权。<br>股东会行使下列职权：<br> (一)决定公司的经营方针和投资计划；<br> (二)选举和更换非由职工代表担任的董事、监事，决定有关董事、监事的报酬事项；<br> (三)审议批准董事会的报告；<br> (四)审议批准监事会或者监事的报告；<br> (五)审议批准公司的年度财务预算方案、决算方案；<br> (六)审议批准公司的利润分配方案和弥补亏损方案；<br> (七)对公司增加或者减少注册资本作出决议；<br> (八)对发行公司债券作出决议；<br> (九)对公司合并、分立、解散、清算或者变更公司形式作出决议；<br> (十)修改公司章程；<br> (十一)公司章程规定的其他职权。</p><ul><li>一般股东按照出资比例行使表决权</li><li>对公司负责</li></ul><h3 id="董事会"><a href="#董事会" class="headerlink" title="董事会"></a>董事会</h3><p>董事会对股东会负责，行使下列职权：<br> (一)召集股东会会议，并向股东会报告工作；<br> (二)执行股东会的决议；<br> (三)决定公司的经营计划和投资方案；<br> (四)制订公司的年度财务预算方案、决算方案；<br> (五)制订公司的利润分配方案和弥补亏损方案；<br> (六)制订公司增加或者减少注册资本以及发行公司债券的方案；<br> (七)制订公司合并、分立、解散或者变更公司形式的方案；<br> (八)决定公司内部管理机构的设置；<br> (九)决定聘任或者解聘公司经理及其报酬事项，并根据经理的提名决定聘任或者解聘公司副经理、财务负责人及其报酬事项；<br> (十)制定公司的基本管理制度；<br> (十一)公司章程规定的其他职权。</p><ul><li>董事会决议的表决，实行一人一票</li><li>对股东会负责</li><li>可不设立，需要执行董事人员</li></ul><h3 id="监事会"><a href="#监事会" class="headerlink" title="监事会"></a>监事会</h3><p>监事会、不设监事会的公司的监事行使下列职权：<br> (一)检查公司财务；<br> (二)对董事、高级管理人员执行公司职务的行为进行监督，对违反法律、行政法规、公司章程或者股东会决议的董事、高级管理人员提出罢免的建议；<br> (三)当董事、高级管理人员的行为损害公司的利益时，要求董事、高级管理人员予以纠正；<br> (四)提议召开临时股东会会议，在董事会不履行本法规定的召集和主持股东会会议职责时召集和主持股东会会议；<br> (五)向股东会会议提出提案；<br> (六)依照本法第一百五十一条的规定，对董事、高级管理人员提起诉讼；<br> (七)公司章程规定的其他职权。</p><ul><li>可不设立，需要监事人员</li></ul><h3 id="经理-1"><a href="#经理-1" class="headerlink" title="经理"></a>经理</h3><p>有限责任公司可以设经理，由董事会决定聘任或者解聘。经理对董事会负责，行使下列职权：<br> (一)主持公司的生产经营管理工作，组织实施董事会决议；<br> (二)组织实施公司年度经营计划和投资方案；<br> (三)拟订公司内部管理机构设置方案；<br> (四)拟订公司的基本管理制度；<br> (五)制定公司的具体规章；<br> (六)提请聘任或者解聘公司副经理、财务负责人；<br> (七)决定聘任或者解聘除应由董事会决定聘任或者解聘以外的负责管理人员；<br> (八)董事会授予的其他职权。<br> 公司章程对经理职权另有规定的，从其规定。<br> 经理列席董事会会议。</p><ul><li>对董事会负责</li><li>董事会决定聘任或者解聘</li></ul><h2 id="国家机关"><a href="#国家机关" class="headerlink" title="国家机关"></a>国家机关</h2><h3 id="工商行政管理机关"><a href="#工商行政管理机关" class="headerlink" title="工商行政管理机关"></a>工商行政管理机关</h3><ul><li>查名</li><li>申请营业执照</li></ul><h3 id="银行"><a href="#银行" class="headerlink" title="银行"></a>银行</h3><h3 id="质量技术监督部门"><a href="#质量技术监督部门" class="headerlink" title="质量技术监督部门"></a>质量技术监督部门</h3><ul><li>申请组织机构代码证</li></ul><h3 id="税务机关"><a href="#税务机关" class="headerlink" title="税务机关"></a>税务机关</h3><ul><li>申请税务登记证</li><li>国税</li><li>地税</li></ul><h3 id="文化局（厅）"><a href="#文化局（厅）" class="headerlink" title="文化局（厅）"></a>文化局（厅）</h3><ul><li>签发网络文化经营许可证</li></ul><p><em>XMind - Trial Version</em></p>]]></content>
      
      
      
        <tags>
            
            <tag> 公司 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JEPG、PNG、WEBP、GIF、SVG的学习使用-WEBP等</title>
      <link href="/2020/02/24/JEPG%E3%80%81PNG%E3%80%81WEBP%E3%80%81GIF%E3%80%81SVG%E7%9A%84%E5%AD%A6%E4%B9%A0%E4%BD%BF%E7%94%A8-WEBP%E7%AD%89/"/>
      <url>/2020/02/24/JEPG%E3%80%81PNG%E3%80%81WEBP%E3%80%81GIF%E3%80%81SVG%E7%9A%84%E5%AD%A6%E4%B9%A0%E4%BD%BF%E7%94%A8-WEBP%E7%AD%89/</url>
      
        <content type="html"><![CDATA[<p><a href="https://github.com/drgonroot/drgonroot.github.io/issues/new" target="_blank" rel="noopener">吐槽、建议、解惑入口网址</a></p><h4 id="GIF"><a href="#GIF" class="headerlink" title="GIF"></a>GIF</h4><p>&emsp; &emsp;Gif一个比较古老的图片格式。图片交换格式(GIF， Graphics Interchange Format)是一种位图图形文件格式，采用8位色最多256种索引颜色调色板描绘图像。GIF是一种压缩文档，使用LZW算法压缩算法进行编码，同时也有效减少了图像文件在网络上传输的时间。<br>&emsp; &emsp;近些年动态的表情包的大火，使得Gif图像重新派上用场。其支持多帧图片，从而实现动画效果（即帧动画），同时也可以设置透明色产生透明图片的。&emsp; 但是由于之前专利的原因，Gif的静态图像功能被PNG给替代了，目前Gif常用于颜色简单的动画上。<br>&emsp; &emsp;Gift也是因为最多支持8位256色，无法支持更加丰富色彩图片。Gift存在色阶过渡糟糕，图片具有颗粒感，不支持Alpha透明通道，边缘有杂边。在静态图像优势没有PNG效果好。</p><a id="more"></a><h4 id="APNG"><a href="#APNG" class="headerlink" title="APNG"></a>APNG</h4><p>&emsp; &emsp;APNG(Animated Portable Network Graphics)格式是PNG位图格式扩展，但未获得PNG组织官方认可。其扩展方式类似GIF 89a,仍对原版PNG保持向下兼容。APNG第一帧为标准PNG图像，剩余的动画和帧速等数据放在PNG扩展数据块上。因此支持原版PNG的软件会正确显示第一帧。<br>&emsp; &emsp;APNG的特点，支持24位真彩色图片，同时也支持 8位Alpha透明通道。其也能向下兼容PNG图像。<br><strong>APNG和GIF对比差异:</strong><br><img src="/images/GIF%E5%92%8CAPNG%E7%9A%84%E5%B7%AE%E5%BC%82.png" alt="GIF和APNG的差异"></p><blockquote><p>APNG实现原理参考：<a href="https://aotu.io/notes/2016/11/07/apng/index.html#APNG%20%E7%9A%84%E7%BB%84%E6%88%90" target="_blank" rel="noopener">APNG实现组成</a></p></blockquote><h4 id="WebP"><a href="#WebP" class="headerlink" title="WebP"></a>WebP</h4><p>WebP标准是Google定制的，迄今为止也只有Google发布的libwebp实现了该的编解码。Webp提供了有损压缩与无损压缩（可逆压缩）的图片文件格式,也支持静态模式图像和动态模式图像。其是8位ARGB四通道描绘图像。  </p><blockquote><p><a href="https://developers.google.com/speed/webp" target="_blank" rel="noopener">官网介绍</a></p></blockquote><h4 id="BPG"><a href="#BPG" class="headerlink" title="BPG"></a>BPG</h4><p>BPG(Better Portable Graphics) 是一种新的图片格式。其主要目的是为了替代JPEG图像，并且质量和文件大小做得更好。</p><blockquote><p><a href="https://bellard.org/bpg/" target="_blank" rel="noopener">官网介绍</a></p></blockquote><h4 id="SVG"><a href="#SVG" class="headerlink" title="SVG"></a>SVG</h4><p>&emsp; &emsp;SVG即可缩放矢量图形 (Scalable Vector Graphics)的简称, 是一种用来描述二维矢量图形的XML标记语言. SVG图形不依赖于分辨率, 因此图形不会因为放大而显示出明显的锯齿边缘.<br>&emsp; &emsp;SVG主要用来显示矢量图，例如一些形状、线和点的组合，所以目前很多主流的图标库都提供SVG格式的文件。</p><h4 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h4><p><a href="https://blog.ibireme.com/2015/11/02/mobile_image_benchmark/" target="_blank" rel="noopener">移动端图片格式调研</a><br><a href="https://aotu.io/notes/2016/11/07/apng/index.html" target="_blank" rel="noopener">APNG及动态图像各类区别</a><br><a href="https://www.jianshu.com/p/261cd13757ce" target="_blank" rel="noopener">图像压缩技术：选择正确的图片格式</a><br><a href="https://www.geekhub.cn/a/1780.html" target="_blank" rel="noopener">动态图片技术 — 历史、格式与性能</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> 后端 </tag>
            
            <tag> 前端 </tag>
            
            <tag> 图片 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JEPG、PNG、WEBP、GIF、SVG的学习使用、 各种网络图片格式学习-PNG</title>
      <link href="/2020/02/24/JEPG%E3%80%81PNG%E3%80%81WEBP%E3%80%81GIF%E3%80%81SVG%E7%9A%84%E5%AD%A6%E4%B9%A0%E4%BD%BF%E7%94%A8-PNG/"/>
      <url>/2020/02/24/JEPG%E3%80%81PNG%E3%80%81WEBP%E3%80%81GIF%E3%80%81SVG%E7%9A%84%E5%AD%A6%E4%B9%A0%E4%BD%BF%E7%94%A8-PNG/</url>
      
        <content type="html"><![CDATA[<p><a href="https://github.com/drgonroot/drgonroot.github.io/issues/new" target="_blank" rel="noopener">吐槽、建议、解惑入口网址</a></p><h3 id="PNG"><a href="#PNG" class="headerlink" title="PNG"></a>PNG</h3><h4 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h4><p>&emsp;&emsp;来自维基百科介绍，便携式网络图形(Portable Network Graphics，PNG)是一种无损压缩位图图形格式，支持索引、灰色、RGB三种颜色方案以及Alpha通道等特性。PNG的开发目标是改善并取代Gif作为适合网络传输的格式而不需专利许可，所以被广泛应用于互联网及其他方面上。</p><h4 id="PNG的特性"><a href="#PNG的特性" class="headerlink" title="PNG的特性"></a>PNG的特性</h4><p>1、无损压缩<br>2、支持索引透明和Alpha透明半透明<br>3、支持256色调色板技术(索引颜色)以产生小体积文件<br>4、使用循环冗余码检测损坏文件<br>5、支持渐近显示和流式读写<br>6、最新的PNG标准允许在一个文件内存储多幅图像（APNG）。</p><a id="more"></a><h4 id="PNG存储实现原理"><a href="#PNG存储实现原理" class="headerlink" title="PNG存储实现原理"></a>PNG存储实现原理</h4><p>这篇文章已经有较好的讲解。<a href="http://www.alloyteam.com/2017/03/the-story-of-png-get-images-and-pixel-content/#%E7%BB%93%E6%9E%84" target="_blank" rel="noopener">PNG存储原理讲解</a></p><h4 id="PNG8、PNG24、PNG32差异"><a href="#PNG8、PNG24、PNG32差异" class="headerlink" title="PNG8、PNG24、PNG32差异"></a>PNG8、PNG24、PNG32差异</h4><table><thead><tr><th>格式</th><th>简介</th><th>最高支持色彩通道</th><th>索引色编辑支持</th><th>透明支持</th></tr></thead><tbody><tr><td>PNG8</td><td>8位单通道，最多显示256种颜色</td><td>256种索引色</td><td>支持</td><td>支持设定特定索引色为透明色（布尔透明）<br>支持为索引色附加8位透明度（256阶alpha透明）</td></tr><tr><td>PNG24</td><td>24位RGB三通道，真彩色图像</td><td>约1600万颜色</td><td>不支持</td><td>不支持</td></tr><tr><td>PNG32</td><td>32位RGBA四通道，在原有的PNG24位基础上增加了Alpha通道来描述透明度</td><td>约1600万颜色，外加256种半透明色</td><td>不支持</td><td>支持8位透明度（256阶alphat透明）</td></tr></tbody></table><h4 id="PNG-索引透明和Alpha透明"><a href="#PNG-索引透明和Alpha透明" class="headerlink" title="PNG 索引透明和Alpha透明"></a>PNG 索引透明和Alpha透明</h4><p>索引透明只能表示透明和不透明，产生体积相对较小的，不过容易产生杂边锯齿。<br>Alpha透明是一个8位的灰度通道，该通道用256级灰度来记录图像中的透明度信息，定义透明、不透明和半透明区域，支持全透明和半透明。</p><blockquote><p>参考：<a href="https://www.cnblogs.com/peunzhang/archive/2013/05/30/3050394.html#png1" target="_blank" rel="noopener">https://www.cnblogs.com/peunzhang/archive/2013/05/30/3050394.html#png1</a></p></blockquote><h4 id="使用场景"><a href="#使用场景" class="headerlink" title="使用场景"></a>使用场景</h4><p>1、小的LOGO,颜色简单且对比强烈图片和背景<br>2、颜色简单、对比度强的透明小图<br>3、颜色很少、具有大块颜色相近的区域或亮度差异十分明显的较简单的图片<br>4、用于页面结构的基本视觉元素，如容器的背景、按钮、导航的背景等应该尽量用PNG格式进行存储，这样才能更好的保证设计品质</p><h4 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h4><p><a href="https://zh.wikipedia.org/wiki/PNG" target="_blank" rel="noopener">PNG特性、对比JPEG、GIF差异</a><br><a href="https://github.com/ericdum/mujiang.info/issues/4" target="_blank" rel="noopener">png8支持透明通道（一）</a><br><a href="http://www.alloyteam.com/2017/06/the-story-of-png-deinterlacing-algorithm/" target="_blank" rel="noopener">png逐行扫描和隔行扫描说明</a><br><a href="https://gameinstitute.qq.com/community/detail/107564" target="_blank" rel="noopener">深入解析png图片解码技术</a><br><a href="https://zhuanlan.zhihu.com/p/22496580" target="_blank" rel="noopener">图片格式中的小较真</a><br><a href="https://www.jianshu.com/p/ab96bf20f90e" target="_blank" rel="noopener">JPG？GIF？PNG？前端如何选择图片格式？</a><br><a href="https://zhuanlan.zhihu.com/p/41498458" target="_blank" rel="noopener">网站建设中使用的png和jpg两种图片格式都有哪些特点和区别</a>   </p>]]></content>
      
      
      
        <tags>
            
            <tag> 后端 </tag>
            
            <tag> 前端 </tag>
            
            <tag> 图片 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>图片有关工具和网站</title>
      <link href="/2020/02/22/%E5%9B%BE%E5%83%8F%E6%9C%89%E5%85%B3%E5%B7%A5%E5%85%B7%E5%92%8C%E7%BD%91%E7%AB%99/"/>
      <url>/2020/02/22/%E5%9B%BE%E5%83%8F%E6%9C%89%E5%85%B3%E5%B7%A5%E5%85%B7%E5%92%8C%E7%BD%91%E7%AB%99/</url>
      
        <content type="html"><![CDATA[<p><a href="https://github.com/drgonroot/drgonroot.github.io/issues/new" target="_blank" rel="noopener">吐槽、建议、解惑入口网址</a></p><h5 id="压缩网站和软件工具"><a href="#压缩网站和软件工具" class="headerlink" title="压缩网站和软件工具"></a>压缩网站和软件工具</h5><blockquote><p>参考: <a href="https://blog.ibireme.com/2015/11/02/mobile_image_benchmark/#png" target="_blank" rel="noopener">https://blog.ibireme.com/2015/11/02/mobile_image_benchmark/#png</a></p></blockquote><h6 id="网站"><a href="#网站" class="headerlink" title="网站"></a>网站</h6><p><a href="https://pmt.sourceforge.io/pngcrush/" target="_blank" rel="noopener">Xcode自带PNG压缩工具pnycrush</a><br><a href="https://pngquant.org/" target="_blank" rel="noopener">pngquant</a><br><a href="https://tinify.cn/" target="_blank" rel="noopener">智能PNG和JPEG图片压缩</a><br><a href="https://zhitu.isux.us/" target="_blank" rel="noopener">腾讯智图</a><br><a href="http://www.bejson.com/convert/image_to_svg/" target="_blank" rel="noopener">在线jpg,png图片转SVG工具</a><br><a href="https://www.iconfont.cn/" target="_blank" rel="noopener">阿里矢量图标库</a><br><a href="https://www.favicon-generator.org/" target="_blank" rel="noopener">Favicon &amp; App Icon Generator</a><br><a href="http://www.uugai.com/" target="_blank" rel="noopener">完全免费的LOGO在线设计制作工具</a><br><a href="https://github.com/SamHerbert/SVG-Loaders" target="_blank" rel="noopener">SVG进度条</a></p><a id="more"></a><h6 id="软件工具"><a href="#软件工具" class="headerlink" title="软件工具"></a>软件工具</h6><p><a href="https://imageoptim.com/mac" target="_blank" rel="noopener">ImageOptim</a><br><a href="https://imagemagick.org/index.php" target="_blank" rel="noopener">imagemgick</a><br><a href="https://pmt.sourceforge.io/pngcrush/" target="_blank" rel="noopener">Pngcrush</a><br><a href="https://github.com/sharkdp/hexyl" target="_blank" rel="noopener">查看二进制工具-hexyl</a><br><a href="https://ridiculousfish.com/hexfiend/" target="_blank" rel="noopener">查看二进制工具-HexFiend</a><br><a href="https://sourceforge.net/projects/apngasm/" target="_blank" rel="noopener">创建APNG图片工具</a></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pngcrush 是 Xcode 自带的 PNG 压缩工具，相对于设计师用 Photoshop 生成的图片来说，它能取得不错的压缩效果。</span><br><span class="line">ImageOptim 则更进一步，对每张图用多种缩算法进行比对，选择压缩比更高的结果，进一步缩小了文件体积。</span><br><span class="line">TinyPNG.com 相对于其他工具来说，压缩比高得不像话。它启用了类似 GIF 那样的颜色索引表对 PNG 进行压缩，所以会导致颜色丰富的图片丢失掉一部分细节。如果使用 TinyPNG 的话，最好在压缩完成后让设计师看一下颜色效果是否可以接受。</span><br></pre></td></tr></table></figure><h5 id="其他相关"><a href="#其他相关" class="headerlink" title="其他相关"></a>其他相关</h5><p>1、<a href="https://caniuse.com/" target="_blank" rel="noopener">图片格式浏览器支持情况网站</a>   </p><h5 id="书籍"><a href="#书籍" class="headerlink" title="书籍:"></a>书籍:</h5><p>《探索图像文件的奥秘》</p>]]></content>
      
      
      
        <tags>
            
            <tag> 后端 </tag>
            
            <tag> 前端 </tag>
            
            <tag> 图像 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>图像基础知识、图像基础属性、图像哪些你不知道的小知识点 (一)</title>
      <link href="/2020/02/22/%E5%9B%BE%E5%83%8F%E5%9F%BA%E7%A1%80/"/>
      <url>/2020/02/22/%E5%9B%BE%E5%83%8F%E5%9F%BA%E7%A1%80/</url>
      
        <content type="html"><![CDATA[<p><a href="https://github.com/drgonroot/drgonroot.github.io/issues/new" target="_blank" rel="noopener">吐槽、建议、解惑入口网址</a></p><h3 id="图像"><a href="#图像" class="headerlink" title="图像"></a>图像</h3><blockquote><p><a href="https://www.w3.org/Graphics/" target="_blank" rel="noopener">W3C图像详细定义</a></p></blockquote><h4 id="图形格式"><a href="#图形格式" class="headerlink" title="图形格式"></a>图形格式</h4><p>图像格式分为位图图形格式和矢量图形格式。</p><h5 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h5><p>位图（bitmap）图形格式是以像素点阵来描绘图像。<br>矢量图片格式是通过组成图形的一些基本元素，如点、线、面，边框，填充色等信息通过计算的方式来显示图形的。</p><blockquote><p>引用:<a href="https://zhuanlan.zhihu.com/p/22496580" target="_blank" rel="noopener">图片格式中的小较真</a><br>&emsp;&emsp; <strong>矢量图</strong> 是通过组成图形的一些基本元素，如点、线、面，边框，填充色等信息通过计算的方式来显示图形的。就好比我们在几何学里面描述一个圆可以通过它的圆心位置和半径来描述，当然还可以通过边框的粗细、颜色以及填充的颜色等数据去描述它的样式。而电脑在显示的时候则通过这些数据去绘制出我们定义的图像。<br>&emsp;&emsp; <strong>矢量图</strong> 的优点在于文件相对较小，并且放大缩小不会失真。缺点则是以完美的几何图形表现出来的图片很难表现自然度高的写实图像。<br>&emsp;&emsp; <strong>位图</strong> 又叫像素图或栅格图，它是通过记录图像中每一个点的颜色、深度、透明度等信息来存储和显示图像。一张位图就好比一幅大的拼图，只不过每个拼块都是一个纯色的像素点，当我们把这些不同颜色的像素点按照一定规律排列在一起的时候，就形成了我们所看到的图像。所以当我们放大一幅像素图到一定程度时，能看到拼片一样的像素点。<br>&emsp;&emsp; <strong>位图</strong> 的优点是利于显示色彩层次丰富的写实图像。缺点则是文件较大，放大和缩小图像会失真。尽管我们在web页面中所使用的JPG、PNG、GIF格式的图像都是位图，即他们都是通过记录像素点的数据来保存和显示图像，但这些不同格式的图像在记录这些数据时的方式却不一样，这就是涉及到有损压缩和无损压缩的区别——是否失真。</p></blockquote><a id="more"></a><h5 id="图形格式实现"><a href="#图形格式实现" class="headerlink" title="图形格式实现"></a>图形格式实现</h5><blockquote><p>参考：<a href="https://zh.wikipedia.org/wiki/图形文件格式比较#位图" target="_blank" rel="noopener">图形格式具体格式</a></p></blockquote><p>位图：JPEG/JPG、PNG、WEBP、GIF等<br>矢量图： SVG等</p><h5 id="图形存储"><a href="#图形存储" class="headerlink" title="图形存储"></a>图形存储</h5><p>位图存储即像素点的存储。将五颜六色像素点使用计算机二进制(0/1)来进行描述。进而引出图像模式。<br>图像模式分为：位图模式、RGB模式、索引颜色模式<br><strong>位图模式</strong> 是1位深度的图像。它只是黑和白两种颜色。<br><strong>RGB模式</strong> 是三原色模式，一个像素点用8位3通道即24位(3个字节)来进行描述，表示的颜色范围有1677万种颜色，我们也称之谓“真彩色”。<br><strong>索引颜色模式</strong> 生成最多256种颜色的8位图像文件。当转换为索引颜色时，Photoshop 将构建一个颜色查找表 (CLUT)，用以存放并索引图像中的颜色。如果原图像中的某种颜色没有出现在该表中，则程序将选取最接近的一种，或使用仿色以现有颜色来模拟该颜色。</p><p><strong>矢量</strong> 又称为「向量」，矢量图形中的图形元素（点和线段）称为对象，每个对象都是一个单独的个体，它具有大小、方向、轮廓、颜色和屏幕位置等属性。例如SVG（可缩放矢量图形）是一种基于 XML 语法的图像格式,是对图像的形状描述。</p><blockquote><p>参考：<br><a href="https://baike.baidu.com/item/图像模式/3063020" target="_blank" rel="noopener">图像模式</a><br><a href="https://helpx.adobe.com/cn/photoshop/using/color-modes.html" target="_blank" rel="noopener">AdobePhotoshop用户指南-图像和颜色基础知识-颜色模式</a><br><a href="http://jartto.wang/2018/12/09/bitmap/" target="_blank" rel="noopener">什么是位图和矢量图</a></p></blockquote><h4 id="通道"><a href="#通道" class="headerlink" title="通道"></a>通道</h4><p>&emsp;&emsp;作者认为通道出现更多是技术层面方式实现颜色变化表示所产生的。<br>&emsp;&emsp;通道作为图像的组成部分，是与图像的格式密不可分的，图像颜色，格式的不同决定了通道的数量和模式，在ps通道面板中可以直观的看到。<br>&emsp;&emsp;位图模式和索引模式的图片是单通道图片，而RGB模式的图片是三通道图片，通过为R通道、G通道、B通道，RGBA模式图片是四通道图片，是在RGB三个通道上额外增加的一个Alpha通道。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">安卓支持的颜色模式：</span><br><span class="line">颜色模式  备注</span><br><span class="line">ARGB8888 四通道高精度(32位)</span><br><span class="line">ARGB4444 四通道低精度(16位)</span><br><span class="line">RGB565   屏幕默认模式(16位)</span><br><span class="line">Alpha8   仅有透明通道(8位)</span><br></pre></td></tr></table></figure><h4 id="颜色深度-色彩深度"><a href="#颜色深度-色彩深度" class="headerlink" title="颜色深度(色彩深度)"></a>颜色深度(色彩深度)</h4><p>&emsp;&emsp;色彩深度简称色深，在计算机图形学领域表示在位图或者视频帧缓冲区中储存每一像素的颜色所用的位数，常用单位为位/像素（bpp）。色彩深度越高，可用的颜色就越多。<br>eg: JPEG颜色深度：24位 png-8颜色深度：8位</p><blockquote><p>参考：<a href="https://zh.wikipedia.org/wiki/%E8%89%B2%E5%BD%A9%E6%B7%B1%E5%BA%A6" target="_blank" rel="noopener">https://zh.wikipedia.org/wiki/%E8%89%B2%E5%BD%A9%E6%B7%B1%E5%BA%A6</a></p></blockquote><h4 id="Alpha透明和索引透明"><a href="#Alpha透明和索引透明" class="headerlink" title="Alpha透明和索引透明"></a>Alpha透明和索引透明</h4><p>讲述索引透明，需要先说明下<a href="https://www.hisour.com/zh/indexed-color-24729/" target="_blank" rel="noopener">索引颜色(Indexed Color)</a>。</p><blockquote><p>&emsp;&emsp;在计算中，<strong>索引颜色（Indexed color）</strong> 是一种以有限的方式管理数字图像颜色的技术，以节省计算机内存和文件存储空间，同时加速显示刷新和文件传输。它是矢量量化压缩的一种形式。<br>&emsp;&emsp;当以这种方式对图像进行编码时，颜色信息不直接由图像像素数据携带，而是存储在称为调色板的单独数据片段中：颜色元素阵列。数组中的每个元素表示一种颜色，由它在数组中的位置进行索引。单个条目有时被称为颜色寄存器。图像像素不包含其颜色的完整规范，但仅包含其在调色板中的索引。这种技术有时被称为伪彩色或间接彩色，因为颜色是间接处理的。</p></blockquote><p>索引透明是基于索引颜色上增加一位来标识透明。</p><blockquote><p>&emsp;&emsp;通常使用索引颜色的情况下，图像深度的值即为 8，因而调色板里存放的颜色就只有 256 种颜色，长度为 256 * 3 个字节。再加上 1 位布尔值表示透明像素，这就是我们常说的 png8 图片了。<br>摘抄至：<a href="http://www.alloyteam.com/2017/03/the-story-of-png-get-images-and-pixel-content/" target="_blank" rel="noopener">png 的故事：获取图片信息和像素内容</a>    </p></blockquote><p>Alpha透明即阿尔法透明，通常我们会使用一个通道来单独表示Alpha透明。因此对于8位的Alpha通道可以表示256种不同程度半透明色。</p><h4 id="图像逐行扫描算法和隔行扫描算法"><a href="#图像逐行扫描算法和隔行扫描算法" class="headerlink" title="图像逐行扫描算法和隔行扫描算法"></a>图像逐行扫描算法和隔行扫描算法</h4><p>字面上意思逐行扫描算法是像素点一行一行行的扫描显示的，隔行扫描算法是每次扫描会跳过一些像素点进行多次扫描显示。<br>从图片展示效果：逐行扫描算法上看到图像是一行一行的展示出来，隔行扫描算法是整体模糊展示逐步清晰显示出来。<br>photoshop上设置这两种编码算法是基准(逐行扫描算法)和连续(隔行扫描算法)。<br>在网速相对较慢情况下，图片即刻展示。</p><h4 id="有损压缩和无损压缩"><a href="#有损压缩和无损压缩" class="headerlink" title="有损压缩和无损压缩"></a>有损压缩和无损压缩</h4><p>&emsp;&emsp;有损压缩是对图像数据进行处理，去掉那些我们人眼分辨不出来的颜色，然后周边颜色通过渐变或者其他形式补充进来。这样既然降低图片质量大小，又不会影响图片的还原效果。(eg:JPEG)<br>&emsp;&emsp;无损压缩是先判断图像上哪些区域颜色是相同的，哪些是不同的，然后把这些相同数据信息进行压缩记录，而把不同数据另外保存。（eg:PNG）<br>参考：<a href="https://www.cnblogs.com/pqjzxq/p/5749304.html#%E6%9C%89%E6%8D%9F%E5%8E%8B%E7%BC%A9%E5%92%8C%E6%97%A0%E6%8D%9F%E5%8E%8B%E7%BC%A9" target="_blank" rel="noopener">有损压缩和无损压缩</a></p><h4 id="从编码图片工具性能角度"><a href="#从编码图片工具性能角度" class="headerlink" title="从编码图片工具性能角度"></a>从编码图片工具性能角度</h4><p>这篇文章分析很到位<a href="https://blog.ibireme.com/2015/11/02/mobile_image_benchmark/" target="_blank" rel="noopener">移动端图片格式调研</a></p><h4 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h4><p>各类主要图像格式突现时间线：<strong>GIF-1987</strong>，<strong>JPEG-1992</strong>，<strong>PNG-1996</strong>，<strong>APNG-2004</strong>，<strong>WebP-2010</strong></p><h4 id="参考资料："><a href="#参考资料：" class="headerlink" title="参考资料："></a>参考资料：</h4><p><a href="http://www.alloyteam.com/2017/03/the-story-of-png-get-images-and-pixel-content/" target="_blank" rel="noopener">png 的故事：获取图片信息和像素内容</a><br><a href="https://www.hisour.com/zh/indexed-color-24729/" target="_blank" rel="noopener">索引颜色(Indexed Color)</a><br><a href="https://zh.wikipedia.org/wiki/图形文件格式比较#位图" target="_blank" rel="noopener">图形文件格式比较</a><br><a href="https://baike.baidu.com/item/图像模式/3063020" target="_blank" rel="noopener">图像模式</a><br><a href="https://helpx.adobe.com/cn/photoshop/using/color-modes.html" target="_blank" rel="noopener">AdobePhotoshop用户指南-图像和颜色基础知识-颜色模式</a><br><a href="http://jartto.wang/2018/12/09/bitmap/" target="_blank" rel="noopener">什么是位图和矢量图</a><br><a href="https://zhuanlan.zhihu.com/p/22496580" target="_blank" rel="noopener">图片格式中的小较真</a><br><a href="https://zh.wikipedia.org/wiki/图形文件格式比较#位图" target="_blank" rel="noopener">图形文件格式比较</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> 后端 </tag>
            
            <tag> 前端 </tag>
            
            <tag> 图像 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JEPG、PNG、WEBP、GIF、SVG的学习使用、 各种网络图片格式学习-JPEG</title>
      <link href="/2020/02/15/JEPG%E3%80%81PNG%E3%80%81WEBP%E3%80%81GIF%E3%80%81SVG%E7%9A%84%E5%AD%A6%E4%B9%A0%E4%BD%BF%E7%94%A8-JPEG/"/>
      <url>/2020/02/15/JEPG%E3%80%81PNG%E3%80%81WEBP%E3%80%81GIF%E3%80%81SVG%E7%9A%84%E5%AD%A6%E4%B9%A0%E4%BD%BF%E7%94%A8-JPEG/</url>
      
        <content type="html"><![CDATA[<p><a href="https://github.com/drgonroot/drgonroot.github.io/issues/new" target="_blank" rel="noopener">吐槽、建议、解惑入口网址</a></p><h5 id="GPEG"><a href="#GPEG" class="headerlink" title="GPEG"></a>GPEG</h5><h6 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h6><p>&ensp; &ensp; JPEG(Joint Photographic Experts Group:联合图像专家小组,1972年)是第一个国际图像压缩标准。JPEG压缩标准描述将图像转换为字节的数据串流(streaming)，没有说明如何将这些字节存储。     </p><blockquote><p>JPEG算法原理解析(整理像素点，以数学三角函数表示，通过哈夫曼树进行存储)<br><a href="https://thecodeway.com/blog/?p=69" target="_blank" rel="noopener">JPEG算法解密一</a><br><a href="https://thecodeway.com/blog/?p=353" target="_blank" rel="noopener">JPEG算法解密二</a><br><a href="https://thecodeway.com/blog/?p=480" target="_blank" rel="noopener">JPEG算法解密三</a><br><a href="https://thecodeway.com/blog/?p=522" target="_blank" rel="noopener">JPEG算法解密四</a><br><a href="https://thecodeway.com/blog/?p=690" target="_blank" rel="noopener">JPEG算法解密五</a><br><a href="https://blog.csdn.net/shelldon/article/details/54234433" target="_blank" rel="noopener">CSDN-JPEG图像压缩</a></p></blockquote><p>&ensp; &ensp; .jpeg/.jpg是最常用存储JPEG图像文件格式，是一种有损压缩格式。通常将图像压缩在很小的储存空间并且会将图像中重复或不重要的资料丢弃，因此容易造成图像数据的损伤。一般不建议将JPEG重复压缩会导致数据丢失越来越严重。   </p><pre><code>JPEG压缩标准实现开源库：libjpeg、mozjpeg、miniJPEG[libjpeg](http://libjpeg.sourceforge.net/)    Libjpeg is a widely used C library for reading and writing JPEG image files. It was developed by Tom Lane and the Independent JPEG Group (IJG) during the 1990’s and it is now maintained by several developers using various services identified in the SourceForge summary.The latest release is version 6b of 27-Mar-1998. This is a stable and solid foundation for many application’s JPEG support.</code></pre><a id="more"></a><p>1、JPEG是有损压缩算法。有损压缩就是为了将图片压缩到更小，利用人眼观察图片的特点改变某些丢弃掉一些人眼不易察觉的原始颜色信息，而这个是不可逆的。<br>2、其压缩算法可以精确控制压缩比，以图像质量换得存储空间。  Photoshop存储JPEG格式图片，提供11级压缩级别，以0—10级表示。其中0级压缩比最高，图像品质最差。即使采用细节几乎无损的10 级质量保存时，压缩比也可达 5：1。<br>3、它不支持透明背景图像，更加适合颜色复杂的图像。<br>4、JPEG存储图片一个像素使用24位表示，属于真彩色图片。</p><p>后续针对JPEG第一代压缩标准的改进变化，依次出现了：<br>JPEG2000(2000年、支持有损和无损压缩，支持<a href="https://baike.baidu.com/item/%E6%B8%90%E8%BF%9B%E4%BC%A0%E8%BE%93" target="_blank" rel="noopener">渐进传输</a>、开源库:<a href="http://www.openjpeg.org/" target="_blank" rel="noopener">openJPEG</a>)、JPEG XR(2009年, 增加HDR支持)</p><h6 id="JPEG的特性"><a href="#JPEG的特性" class="headerlink" title="JPEG的特性"></a>JPEG的特性</h6><p>1、支持摄影图像或写实图像的高级压缩，并且可利用压缩比例控制图像文件大小。<br>2、有损压缩会使图像数据质量下降，并且在编辑和重新保存JPG格式图像时，这种下降损失会累积。<br>3、JPEG不适用于所含颜色很少、具有大块颜色相近的区域或亮度差异十分明显的较简单的图片。<br>4、它并不适合于线条绘图（drawing）和其他文字或图示（iconic）的图形,因为它的压缩方法用在这些图形的型态上,会得到不适当的结果；<br>5、当它处理矢量图形和 Logo 等线条感较强、颜色对比强烈的图像时，人为压缩导致的图片模糊会相当明显。且不支持透明度处理。</p><h6 id="使用场景"><a href="#使用场景" class="headerlink" title="使用场景"></a>使用场景</h6><p>1、大的背景图<br>2、轮播图<br>3、Banner图    </p><blockquote><p><strong>什么时候应该使用JPEG？</strong><br>&ensp; &ensp; 从上面介绍的JPEG的特性来看，它更适合用来存储具有丰富色彩层次的摄影或写实照片。这是因为色彩层次丰富的图像一般会由于阴影、反光或透视等效果形成明暗、深浅不同的区域，如果我们选择使用PNG8来储存的话，可能一些颜色在调色板上找不到，导致图像上一些数据的丢失，如果使用PNG24的话，它确实可以查找到图像不同层次的颜色，但它会因数据较多增大图片的体积，严重拖慢加载速度，在网站上也容易显示不全。所以，JPEG是最好的选择，它能在尽量压缩文件大小的情况下较好的还原图片的品质。为什么这里不使用SVG呢？SVG有自身的局限性，由于它是点和线精准计算的，一些位图如摄影元素SVG无法实现合适的缩放。<br>引用:<a href="https://www.qifeiye.com/%E6%A8%AA%E5%90%91%E5%AF%B9%E6%AF%94gifjpegpngsvg%EF%BC%8C%E6%95%99%E4%BD%A0%E5%A6%82%E4%BD%95%E5%90%88%E7%90%86%E9%80%89%E6%8B%A9%E5%9B%BE%E5%83%8F%E6%A0%BC%E5%BC%8F/" target="_blank" rel="noopener">横向对比GIF/JPEG/PNG/SVG，教你如何合理选择图像格式</a></p></blockquote><h6 id="基准式JPEG和渐进式JPEG"><a href="#基准式JPEG和渐进式JPEG" class="headerlink" title="基准式JPEG和渐进式JPEG"></a>基准式JPEG和渐进式JPEG</h6><p>基准式JPEG和渐进式JPEG是两种不同编解码方式，还有主要是在网速比较慢的时候，图片加载方式也是不一样的。<br><img src="/images/%E5%9F%BA%E5%87%86%E5%BC%8FJPEG%E5%8A%A0%E8%BD%BD%E6%96%B9%E5%BC%8F.webp" alt="基准式JPEG"><br>基准式JPEG加载情况<br><img src="/images/%E6%B8%90%E8%BF%9B%E5%BC%8FJPEG%E5%8A%A0%E8%BD%BD%E6%96%B9%E5%BC%8F.webp" alt="渐进式JPEG"><br>渐进式JPEG加载情况</p><h5 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h5><p><a href="https://www.jianshu.com/p/d2817058c901" target="_blank" rel="noopener">使用渐进式 JPEG 来提升用户体验</a><br><a href="http://www.taoweng.site/index.php/archives/264/" target="_blank" rel="noopener">每个前端工程师都应该了解的图片知识</a><br><a href="https://www.jianshu.com/p/f5557c0e689e" target="_blank" rel="noopener">JPEG图片格式详解</a><br><a href="https://www.jianshu.com/p/ab96bf20f90e" target="_blank" rel="noopener">JPG？GIF？PNG？前端如何选择图片格式？</a><br><a href="https://zhuanlan.zhihu.com/p/41498458" target="_blank" rel="noopener">网站建设中使用的png和jpg两种图片格式都有哪些特点和区别</a><br><a href="https://www.qifeiye.com/%E6%A8%AA%E5%90%91%E5%AF%B9%E6%AF%94gifjpegpngsvg%EF%BC%8C%E6%95%99%E4%BD%A0%E5%A6%82%E4%BD%95%E5%90%88%E7%90%86%E9%80%89%E6%8B%A9%E5%9B%BE%E5%83%8F%E6%A0%BC%E5%BC%8F/" target="_blank" rel="noopener">横向对比GIF/JPEG/PNG/SVG，教你如何合理选择图像格式</a>    </p><p><a href="https://blog.csdn.net/cmsbupt/article/details/51178761" target="_blank" rel="noopener">下一代Web图像格式：JPEG、JPEG XR、JPEG2000、WebP、BPG</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> 后端 </tag>
            
            <tag> 前端 </tag>
            
            <tag> 图片 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mac os thrift旧版本安装爬坑指南、Mac thrift安装指南、thrift安装学习、thrift安装爬坑</title>
      <link href="/2019/06/01/MacOS%20thrift%E6%97%A7%E7%89%88%E6%9C%AC%E5%AE%89%E8%A3%85%E7%88%AC%E5%9D%91%E6%8C%87%E5%8D%97/"/>
      <url>/2019/06/01/MacOS%20thrift%E6%97%A7%E7%89%88%E6%9C%AC%E5%AE%89%E8%A3%85%E7%88%AC%E5%9D%91%E6%8C%87%E5%8D%97/</url>
      
        <content type="html"><![CDATA[<p><a href="https://github.com/drgonroot/drgonroot.github.io/issues/new" target="_blank" rel="noopener">吐槽、建议、解惑入口网址</a></p><h5 id="Mac-os-thrift旧版本安装爬坑指南"><a href="#Mac-os-thrift旧版本安装爬坑指南" class="headerlink" title="Mac os thrift旧版本安装爬坑指南"></a>Mac os thrift旧版本安装爬坑指南</h5><p>喜欢使用brew来进行一键安装:</p><blockquote><p><a href="https://brew.sh/index_zh-cn" target="_blank" rel="noopener">homebrew官网</a><br><a href="https://github.com/Homebrew/homebrew-core" target="_blank" rel="noopener">homebrew-core github网址</a></p></blockquote><ul><li><p>对于安装最新新版本thrift,我们可以直接是用brew install thrift     </p></li><li><p>使用brew search thrift;查看不同版本的thrift。然后brew install <a href="mailto:thrift@0.9.0" target="_blank" rel="noopener">thrift@0.9.0</a></p></li><li><p>使用复杂brew方案进行安装。思路同时通过找到旧版本的thrift.rb。</p><ol><li>将homebrew-core的git文件下载到本地。</li><li>通过查看Formula/thrift.rb的history。   </li></ol><a id="more"></a><p><code>git log 234b34ab1418bd42b14e73dbeea179f40ef1bec2 -- Formula/thrift.rb</code></p><ol start="3"><li><p>找到旧版本的commit。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">  commit 9d524e4850651cfedd64bc0740f1379b533f607d</span><br><span class="line">Author: BrewTestBot &lt;brew-test-bot@googlegroups.com&gt;</span><br><span class="line">Date:   Thu Dec 29 18:54:26 2016 +0000</span><br><span class="line"></span><br><span class="line">    thrift: update 0.9.3 bottle.</span><br></pre></td></tr></table></figure></li><li><p>然后将链接</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/Homebrew/homebrew-core/blob/&#123;commit_id&#125;/Formula/thrift.rb</span><br><span class="line">即:</span><br><span class="line">https://github.com/Homebrew/homebrew-core/blob/9d524e4850651cfedd64bc0740f1379b533f607d/Formula/thrift.rb</span><br></pre></td></tr></table></figure></li><li><p>点击页面上按钮“Raw”,获取文件内容</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">https://raw.githubusercontent.com/Homebrew/homebrew-core/&#123;commit_id&#125;/Formula/thrift.rb</span><br><span class="line">即:</span><br><span class="line">https://raw.githubusercontent.com/Homebrew/homebrew-core/9d524e4850651cfedd64bc0740f1379b533f607d/Formula/thrift.rb</span><br></pre></td></tr></table></figure></li><li><p>在命令行上 brew install <a href="https://raw.githubusercontent.com/Homebrew/homebrew-core/9d524e4850651cfedd64bc0740f1379b533f607d/Formula/thrift.rb" target="_blank" rel="noopener">https://raw.githubusercontent.com/Homebrew/homebrew-core/9d524e4850651cfedd64bc0740f1379b533f607d/Formula/thrift.rb</a><br>即可。<br>安装成功。</p></li></ol><p>参考网址:<br><a href="https://apple.stackexchange.com/questions/352477/install-older-removed-brew-formula-version" target="_blank" rel="noopener">Install older removed brew formula version</a></p></li></ul><h5 id="源码安装"><a href="#源码安装" class="headerlink" title="源码安装"></a>源码安装</h5><blockquote><p><a href="https://thrift.apache.org/" target="_blank" rel="noopener">thrift快速指南</a></p></blockquote><ul><li><a href="https://github.com/apache/thrift/releases" target="_blank" rel="noopener">下载旧版本</a></li><li><a href="https://thrift.apache.org/docs/install/" target="_blank" rel="noopener">安装下载thrift要求的其他工具|插件</a></li><li><a href="https://thrift.apache.org/docs/BuildingFromSource" target="_blank" rel="noopener">配置、编译、安装</a></li></ul><hr><h5 id="开始爬坑"><a href="#开始爬坑" class="headerlink" title="开始爬坑"></a>开始爬坑</h5><ul><li><p>安装前要求工具 可以使用brew install 进行安装</p><blockquote><p><a href="https://thrift.apache.org/docs/install/os_x" target="_blank" rel="noopener">https://thrift.apache.org/docs/install/os_x</a><br>boost<br>libevent<br>openssl<br>bison 2.5  </p></blockquote></li><li><p>下载thrift文件安装包</p><blockquote><p><a href="https://github.com/apache/thrift/releases/tag/0.9.3" target="_blank" rel="noopener">https://github.com/apache/thrift/releases/tag/0.9.3</a><br>tar -zxvf 解压</p></blockquote></li><li><p>编译流程</p><blockquote><p>./configure –prefix=/usr/local/ –disable-static –without-python –without-csharp –without-ruby –without-perl –without-php –without-haskell –without-erlang<br><a href="https://thrift.apache.org/docs/BuildingFromSource" target="_blank" rel="noopener">https://thrift.apache.org/docs/BuildingFromSource</a><br>出现bison版本低:  <a href="https://stackoverflow.com/questions/31805431/how-to-install-bison-on-mac-osx" target="_blank" rel="noopener">https://stackoverflow.com/questions/31805431/how-to-install-bison-on-mac-osx</a><br>注意需要source  .base_profile</p></blockquote></li><li><p>出现问题：</p><blockquote><p>src/thrift/transport/TSSLSocket.cpp:33:10: fatal error: ‘openssl/err.h’ file not found  #include &lt;openssl/err.h&gt;<br><a href="https://www.jianshu.com/p/f7380139afdd" target="_blank" rel="noopener">https://www.jianshu.com/p/f7380139afdd</a></p></blockquote></li></ul><p>推荐阅读:<br><a href="http://www.ruanyifeng.com/blog/2014/11/compiler.html" target="_blank" rel="noopener">编译器的工作过程</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> 后端 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>通过nginx控制http转https、http转https请求实现、http变成https请求</title>
      <link href="/2019/06/01/nginx%E6%8E%A7%E5%88%B6http%E8%BD%AChttps/"/>
      <url>/2019/06/01/nginx%E6%8E%A7%E5%88%B6http%E8%BD%AChttps/</url>
      
        <content type="html"><![CDATA[<p><a href="https://github.com/drgonroot/drgonroot.github.io/issues/new" target="_blank" rel="noopener">吐槽、建议、解惑入口网址</a></p><h5 id="通过nginx控制http转https"><a href="#通过nginx控制http转https" class="headerlink" title="通过nginx控制http转https"></a>通过nginx控制http转https</h5><blockquote><p>现在越来越多的公司选择https的协议。<br>我司的做法: nginx上进行https的认证，在请求在交给tomcat进行处理。而tomcat处理的是http的请求。因为当进行tomcat应用程进行重定向时直接使用http的请求在处理。</p></blockquote><p>为了保证整个请求都是https请求。我们需要将返回的请求进行重定向为https的。</p><p>通过proxy-redirect修改Location中的url。</p><ol><li>将 conf/conf.d/proxy_params文件中 <code>proxy_redirect off;</code> 注释掉</li><li>将<br>proxy_redirect <a href="http://www.xxxxx.com/" target="_blank" rel="noopener">http://www.xxxxx.com/</a> <a href="https://www.xxxxx.com/" target="_blank" rel="noopener">https://www.xxxxx.com/</a>;<br>proxy_redirect <a href="http://xxxxx.com/" target="_blank" rel="noopener">http://xxxxx.com/</a> <a href="https://xxxx.com/" target="_blank" rel="noopener">https://xxxx.com/</a>;<br>放入到server {}块中。</li></ol><p>如果一直使用http的协议，容易出现网页中有代码注入广告的现象。运营商就经常将小广告注入到网页中，一般是网页的右下角有个摆动的小图标。使用https的协议，能够降低这一现象。不过一山更比一山高，https的也会有网页代码注入的现象，不过特别隐蔽。我遇到表现是打开应用的中网页时会启动其他应用程序如京东、淘宝。<a href="https://www.zhihu.com/question/35720092/answer/523563873" target="_blank" rel="noopener">对这一现象的说明和解决方案</a></p><p>参考资料:<br><a href="http://info.siven.net/posts/d925bb5d.html" target="_blank" rel="noopener">Nginx SSL 结合Tomcat 重定向URL变成HTTP的问题</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> 后端 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HTTP大文件上传思路和总结、HTTP大文件上传学习、服务器集群实现大文件上传</title>
      <link href="/2019/06/01/HTTP%E5%A4%A7%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E6%80%9D%E8%B7%AF%E5%92%8C%E6%80%BB%E7%BB%93/"/>
      <url>/2019/06/01/HTTP%E5%A4%A7%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E6%80%9D%E8%B7%AF%E5%92%8C%E6%80%BB%E7%BB%93/</url>
      
        <content type="html"><![CDATA[<p><a href="https://github.com/drgonroot/drgonroot.github.io/issues/new" target="_blank" rel="noopener">吐槽、建议、解惑入口网址</a></p><h5 id="HTTP大文件上传思路和总结"><a href="#HTTP大文件上传思路和总结" class="headerlink" title="HTTP大文件上传思路和总结"></a>HTTP大文件上传思路和总结</h5><h5 id="无法http大文件一次性上传的原因"><a href="#无法http大文件一次性上传的原因" class="headerlink" title="无法http大文件一次性上传的原因"></a>无法http大文件一次性上传的原因</h5><blockquote><p>存在文件上传大小的限制</p></blockquote><ol><li>默认一般nginx和tomcat都会对上传文件大小进行限制<br>nginx的配置文件nginx.conf设置 client_max_body_size    20m;   </li><li>tomcat默认设置能接收HTTP POST请求的大小最大为2M。如果POST请求传递的数据大于2M,就会报错误。解决方案：修改tomcat的配置server.xml中<connector>标签,在该标签中添 加”maxPostSize”属性,将该属性值设置成你想要的最大值,单位是字节,或者把这个值设置为 0(maxPostSize=”0”)。    </connector></li><li><a href="https://www.jianshu.com/p/285ad45f60d1" target="_blank" rel="noopener">Tomcat项目的web配置</a>。工程项目web.xml的配置</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;servlet&gt;</span><br><span class="line">&lt;multipart-config&gt;</span><br><span class="line">&lt;location&gt;&lt;/location&gt;</span><br><span class="line">&lt;max-file-size&gt;&lt;/max-file-size&gt;</span><br><span class="line">&lt;max-request-size&gt;&lt;/max-request-size&gt;</span><br><span class="line">&lt;file-size-threshold&gt;&lt;/file-size-threshold&gt;</span><br><span class="line">&lt;/multipart-config&gt;</span><br><span class="line">&lt;/servlet&gt;</span><br></pre></td></tr></table></figure><blockquote><ol start="4"><li>Spring配置文件限制上传文件的大小    </li></ol></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean id=&quot;multipartResolver&quot;</span><br><span class="line">        class=&quot;org.springframework.web.multipart.commons.CommonsMultipartResolver&quot;&gt;</span><br><span class="line">        &lt;property name=&quot;maxUploadSize&quot; value=&quot;41943040&quot; /&gt; &lt;!-- 40mb --&gt;</span><br><span class="line">    &lt;/bean&gt;</span><br></pre></td></tr></table></figure><a id="more"></a><h6 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h6><p>错误方案1:<br>1、分片上传大文件<br>2、服务端将每片文件存成临时文件，然后在进行合并文件。<br><strong>存在无核实合并文件是否正确的问题</strong></p><p>错误方案2:<br><img src="/images/Http%E5%88%86%E7%89%87%E4%B8%8A%E4%BC%A0%E6%B5%81%E7%A8%8B.jpg" alt="http分片上传方案"><br>md5文件摘要，确保合并文件没有问题。<br><strong>存在重复造轮子问题。在分布式服务器中进行分片上传无法控制同一个服务器上</strong></p><p>前端选择<a href="http://fex-team.github.io/webuploader/" target="_blank" rel="noopener">WebUploader</a>进行上传。<br>后端没有选择控制nginx路由到指定服务器，而是选择单点文件上传服务thrift。</p><blockquote><p>单点文件上传服务thrift提供功能</p></blockquote><ol><li>存储分片文件和合并分片文件进行存储</li><li>获取文件上传的状态</li></ol><p>前后端交互流程：</p><ul><li>前端向服务器获取上传文件的唯一标识。（可以写入数据库获取id标识）</li><li>前端将指定文件md5，分片上传 {file,chunk,chunks,md5value,唯一id标识, 额外自定义字段}</li><li>服务端检查是否存在唯一id标识，校验参数正确性  <ol><li>调用单点文件上传服务，存储指定文件路径夹下（使用 <code>md5Value+userId+唯一id标识</code> 作为唯一文件夹名称）</li><li>单点文件上传服务通过对分片文件进行排序统计返回是否可以进行合并文件操作。 | 单点文件上传服务通过对分片文件进行排序统计返回是否正在进行合并操作。</li></ol></li><li>前端收到合并信息停止上传文片文件并调用服务端进行文件合并。</li><li>服务端清理相关的文件夹。</li><li>当前端接收上传失败的信息，需要调用服务端清理相关文件的操作。</li></ul><hr><h6 id="安卓APK文件上传（不是特别规范，有待以后自己多加研究）"><a href="#安卓APK文件上传（不是特别规范，有待以后自己多加研究）" class="headerlink" title="安卓APK文件上传（不是特别规范，有待以后自己多加研究）"></a>安卓APK文件上传（不是特别规范，有待以后自己多加研究）</h6><blockquote><p>前端分片文件 -&gt; 服务端 -&gt; 单点文件服务</p></blockquote><ul><li>单点文件服务是否在合并文件 -&gt; 服务端 -&gt; 前端</li></ul><p><strong>这一步就是为了让服务端分片不去占用磁盘。降低出错下，产生大量临时文件</strong></p><blockquote><p>前端删除分片文件 -&gt; 服务端 -&gt; 单点文件服务      </p></blockquote><ul><li>单点文件服务删除分片文件 -&gt; 服务端 -&gt; 前端</li></ul><p><strong>增加这一步的原因：APK远程上传到CDN上耗时较长，容易超过request时间。改用轮询来处理，让界面不卡死，容易有反馈。</strong></p><blockquote><p>前端获取APK文件上传状态 -&gt; 服务端 -&gt; 单点文件服务</p></blockquote><ul><li>单点文件服务APK上传状态 -&gt; 服务端 -&gt; 前端</li></ul><p><img src="/images/APK%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0.jpg" alt="APK上传流程"></p><p>推荐了解网址:<br><a href="https://my.oschina.net/appnet/blog/1591830" target="_blank" rel="noopener">大文件分步式分片上传和续传</a><br><a href="https://blog.kazaff.me/2014/11/14/%E8%81%8A%E8%81%8A%E5%A4%A7%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/" target="_blank" rel="noopener">聊聊大文件上传</a><br><a href="https://blog.breezelin.cn/scheme-nginx-php-js-upload-process.html" target="_blank" rel="noopener">HTTP文件上传的一个后端完善方案（NginX）</a><br><a href="https://segmafrontend.github.io/2018/09/19/%E5%A4%A7%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/" target="_blank" rel="noopener">大文件上传解决方案</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> 后端 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>IDEA技巧、IDEA经验分享、IDEA学习、IDEA探索</title>
      <link href="/2019/02/12/IDEA%E5%B0%8F%E6%8A%80%E5%B7%A7/"/>
      <url>/2019/02/12/IDEA%E5%B0%8F%E6%8A%80%E5%B7%A7/</url>
      
        <content type="html"><![CDATA[<p><a href="https://github.com/drgonroot/drgonroot.github.io/issues/new" target="_blank" rel="noopener">吐槽、建议、解惑入口网址</a><br><strong>* 提供IDEA使用小技巧 *</strong></p><blockquote><p>推荐一些本人亲身尝试，在实际开发中比较实用的小技巧，可以大大提高开发效率。</p></blockquote><h5 id="IDEA左侧显示打开代码文件和资源文件"><a href="#IDEA左侧显示打开代码文件和资源文件" class="headerlink" title="IDEA左侧显示打开代码文件和资源文件"></a>IDEA左侧显示打开代码文件和资源文件</h5><blockquote><p>应用场景:默认IDEA的代码文件的Tab放在代码区的上方。但是实际开发，我们经常打开很多代码文件，左侧显示整体显示，可以提高管理打开代码文件。</p></blockquote><h6 id="结果"><a href="#结果" class="headerlink" title="结果"></a>结果</h6><p><img src="/images/IDEA%E5%B7%A6%E4%BE%A7%E6%98%BE%E7%A4%BA%E4%BB%A3%E7%A0%81%E6%96%87%E4%BB%B6%E6%88%AA%E5%9B%BE.jpeg" alt="IDEA左侧显示打开代码文件截图"></p><a id="more"></a><h6 id="操作步骤"><a href="#操作步骤" class="headerlink" title="操作步骤:"></a>操作步骤:</h6><p><img src="/images/IDEA%E5%B7%A6%E4%BE%A7%E6%98%BE%E7%A4%BA%E4%BB%A3%E7%A0%81%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C%E6%88%AA%E5%9B%BE.jpeg" alt="IDEA左侧显示打开代码文件操作截图"></p><h5 id="IDEA多个模块同名分支统一切换-（Multi-root-same-name-brances-change）"><a href="#IDEA多个模块同名分支统一切换-（Multi-root-same-name-brances-change）" class="headerlink" title="IDEA多个模块同名分支统一切换 （Multi-root same name brances change）"></a>IDEA多个模块同名分支统一切换 （Multi-root same name brances change）</h5><blockquote><p>应用场景:默认IDEA的分支操作:模块分支统一操作(Common Local Branches)和单模块分支操作(Local Branches)。 对于某个模块同名的分支的处理很难处理。 (类似问题:<a href="https://stackoverflow.com/questions/13797331/intellij-switching-between-multiple-git-local-branches" target="_blank" rel="noopener">https://stackoverflow.com/questions/13797331/intellij-switching-between-multiple-git-local-branches</a>)</p></blockquote><p>灵感来自这篇文章:<a href="https://intellij-support.jetbrains.com/hc/en-us/community/posts/360000135790-Task-Management-does-not-respect-Execute-branch-operations-on-all-roots-setting" target="_blank" rel="noopener">Task Management does not respect “Execute branch operations on all roots” setting</a></p><h6 id="操作步骤-1"><a href="#操作步骤-1" class="headerlink" title="操作步骤"></a>操作步骤</h6><p>Click “Tools” &gt; “Tasks &amp; Contexts” &gt; “Open Task”</p><p><img src="/images/IDEA%E5%BC%80%E5%90%AF%E6%89%80%E6%9C%89%E6%A0%B9%E4%B8%8A%E5%88%86%E6%94%AF%E6%93%8D%E4%BD%9C.jpeg" alt="IDEA开启所有根上分支操作"></p><p><img src="/images/IDEATask%E7%9A%84%E4%BD%8D%E7%BD%AE.jpeg" alt="IDEATask的位置"></p><p><img src="/images/IDEA%E7%9A%84Task%E6%93%8D%E4%BD%9C.jpeg" alt="IDEA的Task操作"></p><h5 id="IDEA的编辑区不换行操作"><a href="#IDEA的编辑区不换行操作" class="headerlink" title="IDEA的编辑区不换行操作"></a>IDEA的编辑区不换行操作</h5><p><img src="/images/IDEA%E4%B8%8D%E6%8D%A2%E8%A1%8C%E6%93%8D%E4%BD%9C.jpg" alt="IDEA不换行操作"></p><h5 id="IDEA的Commit-Changes显示提交的分支操作"><a href="#IDEA的Commit-Changes显示提交的分支操作" class="headerlink" title="IDEA的Commit Changes显示提交的分支操作"></a>IDEA的Commit Changes显示提交的分支操作</h5><p><img src="/images/IDEA%E6%8F%90%E4%BA%A4%E5%8F%98%E5%8C%96%E6%98%BE%E7%A4%BA%E5%88%86%E6%94%AF%E5%90%8D.jpg" alt="IDEA提交改变显示分支名"></p><h5 id="IDEA设置serialVersionUID"><a href="#IDEA设置serialVersionUID" class="headerlink" title="IDEA设置serialVersionUID"></a>IDEA设置serialVersionUID</h5><p><img src="/images/IDEA%E7%9A%84%E8%AE%BE%E7%BD%AE%E6%98%BE%E7%A4%BAserialVersionUID.jpg" alt="IDEA设置serialVersionUID"></p><h5 id="IDEA的翻译插件"><a href="#IDEA的翻译插件" class="headerlink" title="IDEA的翻译插件"></a>IDEA的翻译插件</h5><p>第一步安装插件：<br><img src="/images/Translation%E6%8F%92%E4%BB%B6%E4%B8%8B%E8%BD%BD.jpg" alt="Translation 插件下载"><br>第二步完毕后显示位置<br><img src="/images/Translation%E6%8F%92%E4%BB%B6%E6%98%BE%E7%A4%BA%E4%BD%8D%E7%BD%AE.jpg" alt="Translation 插件显示位置"><br>第三步设置插件选项<br>正则描述: <code>(@[a-z]+|/|\*|\{|\}|\#|(&lt;[/a-z]+&gt;))</code><br><img src="/images/Translation%E6%8F%92%E4%BB%B6%E8%AE%BE%E7%BD%AE.jpg" alt="Translation 插件设置"></p><h5 id="IDEA-高效将远程分支变成本地分支"><a href="#IDEA-高效将远程分支变成本地分支" class="headerlink" title="IDEA 高效将远程分支变成本地分支"></a>IDEA 高效将远程分支变成本地分支</h5><blockquote><p>将分支名称一致的多个项目远程分支变成对应项目本地分支操作<br><img src="/images/%E5%B0%86%E8%BF%9C%E7%A8%8B%E5%88%86%E6%94%AF%E5%8F%98%E6%88%90%E6%9C%AC%E5%9C%B0%E5%88%86%E6%94%AF.png" alt="将远程分支变成本地分支"></p></blockquote>]]></content>
      
      
      
        <tags>
            
            <tag> IDEA </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MacOX安装JMagick、Jmagick安装学习、Jmagick爬坑指南</title>
      <link href="/2019/01/29/MacOX%E5%AE%89%E8%A3%85JMagick/"/>
      <url>/2019/01/29/MacOX%E5%AE%89%E8%A3%85JMagick/</url>
      
        <content type="html"><![CDATA[<p><a href="https://github.com/drgonroot/drgonroot.github.io/issues/new" target="_blank" rel="noopener">吐槽、建议、解惑入口网址</a></p><h5 id="MacOX安装JMgick原因和使用JMagick执行流程"><a href="#MacOX安装JMgick原因和使用JMagick执行流程" class="headerlink" title="MacOX安装JMgick原因和使用JMagick执行流程"></a>MacOX安装JMgick原因和使用JMagick执行流程</h5><blockquote><p>目前对于图片处理，很少采用java去处理图片，性能不是很好。目前我们公司采用ImageMagick图片处理，有些采用Process执行cmd命令，有些采用jmagick的java接口进行处理。</p></blockquote><p><a href="https://www.imagemagick.org/index.php" target="_blank" rel="noopener">ImageMagick官网</a><br>通过jmagick调用native方法来调用JMagick的方法, 再由JMagick调用ImageMagick的方法。jmagick使用Java代码写的。JMagick使用C语言写的，含有java JNI生成的头文件。ImageMagick使用C语言写的，没有含有java JNI生成的头文件。 <a href="https://elf8848.iteye.com/blog/455675" target="_blank" rel="noopener">ImageMagick介绍和执行流程原因解释</a>         </p><ul><li>执行流程:                     </li><li>jmagick（java） –&gt; JMagick(C) –&gt; ImageMagick(C)</li></ul><a id="more"></a><h5 id="本地MacOX执行遇到问题"><a href="#本地MacOX执行遇到问题" class="headerlink" title="本地MacOX执行遇到问题"></a>本地MacOX执行遇到问题</h5><p>new MagickInfo(“”); 调用时出现无法加载MagickLoader，实际无法加载资源JMagick；</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ClassLoader.getSystemClassLoader().loadClass(&quot;magick.MagickLoader&quot;).newInstance();</span><br><span class="line">public class MagickLoader &#123;</span><br><span class="line">    static &#123;      </span><br><span class="line">        System.loadLibrary(&quot;JMagick&quot;);    </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>因为jmagick的接口都是本地调用，需要加载JNI的JMagick动态库。因此，接下来我们的主要任务是生成JMagick的动态库。<br>通过Brew install ImageMagick直接安装使用。但是JMagick只用源码包，需要进行编译安装。尽量将ImageMagick和JMagick安装在同一路径下。</p><h6 id="Brew-install-ImageMagick-开始编译JMagick，生成JMagick动态库。"><a href="#Brew-install-ImageMagick-开始编译JMagick，生成JMagick动态库。" class="headerlink" title="Brew install ImageMagick,开始编译JMagick，生成JMagick动态库。"></a>Brew install ImageMagick,开始编译JMagick，生成JMagick动态库。</h6><ul><li>遇到JMagick出现找不到api.h文件(实际上在ImageMagick-7是没有这个api.h文件，在ImageMagick-6是有api.h文件):<br>checking magick/api.h usability… no<br>checking magick/api.h presence… no<br>checking for magick/api.h… no<br>configure: error: ‘Unable to find ImageMagick header files’。</li></ul><p>出现这种情况通过pkg-config、修改configure的参数、查看configure源码，根据报错来修改文件路径，让其能够找到header files等等方法。这些方法都没有解决问题。    </p><ul><li><a href="http://promiselove.github.io/2017/11/30/Mac%E5%AE%89%E8%A3%85Imagemagick%E5%92%8CJMagick/" target="_blank" rel="noopener">该文章找到原因</a></li></ul><p>主要是因为JMagick版本老(最新版本是2013更新的)，无法跟上ImageMagick的节奏。ImageMagick的文件位置都发生了很大的变化。(注.看configure源码，可以看到一些文件路径不在了)。</p><ul><li><p>我们需要做的是：ImageMagick不要安装最新版本，安装旧版ImageMaick6相关版本，并且下载JMagick6.4.0版本。</p></li><li><p>根据configure的部分源码</p></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"># Check whether --with-magick-home was given.</span><br><span class="line">if test &quot;$&#123;with_magick_home+set&#125;&quot; = set; then</span><br><span class="line">  withval=$with_magick_home; MAGICK_HOME=$&#123;withval&#125;</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">for MPATH in /usr /usr/local /usr/local/ImageMagick /usr/local/ImageMagick-$&#123;VER_MAJOR&#125;.$&#123;VER_MINOR&#125;.$&#123;VER_MICRO&#125; $&#123;MAGICK_HOME&#125; ; do</span><br><span class="line">        # Location before IM 6.3.8.something</span><br><span class="line">        if  test -f $&#123;MPATH&#125;/include/magick/api.h  ; then</span><br><span class="line">                MAGICK_LIB_PATH=$&#123;MPATH&#125;/lib</span><br><span class="line">                MAGICK_LIBS=&quot;-L$&#123;MPATH&#125;/lib -lMagick&quot;</span><br><span class="line">                MAGICK_INCLUDES=-I$&#123;MPATH&#125;/include</span><br><span class="line">                MAGICK_REALHOME=$&#123;MPATH&#125;</span><br><span class="line">        fi</span><br><span class="line">        # Location after IM 6.3.8.something</span><br><span class="line">        if  test -f $&#123;MPATH&#125;/include/ImageMagick/magick/api.h  ; then</span><br><span class="line">                MAGICK_LIB_PATH=$&#123;MPATH&#125;/lib</span><br><span class="line">                MAGICK_LIBS=&quot;-L$&#123;MPATH&#125;/lib -lMagick&quot;</span><br><span class="line">                MAGICK_INCLUDES=-I$&#123;MPATH&#125;/include/ImageMagick</span><br><span class="line">                MAGICK_REALHOME=$&#123;MPATH&#125;</span><br><span class="line">        fi</span><br><span class="line">done</span><br></pre></td></tr></table></figure><p>因为编译的该文件的<code>${MPATH}/include/magick/api.h</code>。由于目前include路径下存放的文件多了一层Imagemagick-6，我们要将Imagemagick-6里的所有文件ln -s到include目录下。<br>eg:我的configure命令：</p><ul><li><p><code>JAVA_HOME=&quot;/Library/Java/JavaVirtualMachines/jdk1.8.0_144.jdk/Contents/Home/&quot; CFLAGS=&quot;-I/Library/Java/JavaVirtualMachines/jdk1.8.0_74.jdk/Contents/Home/include/ -I/Library/Java/JavaVirtualMachines/jdk1.8.0_144.jdk/Contents/Home/include/darwin&quot;  ./configure --with-magick-inc-dir=-I/usr/local/Cellar/imagemagick/6.9.10-14/include/ --with-magick-lib-dir=-L/usr/local/Cellar/imagemagick/6.9.10-14/lib/</code></p></li><li><p><code>./configure --with-java-home=</code>/usr/libexec/java_home<code>--with-java-includes=/System/Library/Frameworks/JavaVM.framework/Headers --with-magick-inc-dir=/usr/local/Cellar/imagemagick@6/6.9.10-14/include/ --with-magick-lib-dir=/usr/local/Cellar/imagemagick@6/6.9.10-14/lib/</code></p></li></ul><p>接下来有些问题下面链接可以解决一部分由<br><a href="https://www.zybuluo.com/yibo/note/125940" target="_blank" rel="noopener">Mac OS X 安装JMagick</a>来解决我们configure的问题。<br>因为还有编译文件中的<code>withval=$with_magick_home; MAGICK_HOME=${withval}</code>,因此我们可以通过增加 – with_magick_home参数，解决某些问题。</p><p>make过程中ERROR ：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">make[1]: Entering directory `/usr/local/Cellar/jmagick-6.4.0/6.4.0/src&apos;</span><br><span class="line">make[2]: Entering directory `/usr/local/Cellar/jmagick-6.4.0/6.4.0/src/magick&apos;</span><br><span class="line">make[2]: *** No rule to make target `/usr/local/Cellar/imagemagick/6.9.10-14/include/magick/api.h&apos;, needed by `/usr/local/Cellar/jmagick-6.4.0/6.4.0/obj/magick/magick_PixelPacket.lo&apos;.  Stop.</span><br><span class="line">make[2]: Leaving directory `/usr/local/Cellar/jmagick-6.4.0/6.4.0/src/magick&apos;</span><br><span class="line">make[1]: *** [dir_target] Error 2</span><br><span class="line">make[1]: Leaving directory `/usr/local/Cellar/jmagick-6.4.0/6.4.0/src&apos;</span><br><span class="line">make: *** [dir_target] Error 2</span><br></pre></td></tr></table></figure><p>因为api.h的路径不对，可以通过ln -s 下。eg: cd /usr/local/Cellar/ &amp;&amp; ln -s ./imagemagick@6/ imagemagick</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">make[1]: Entering directory `/Users/yibo/Downloads/6.4.0/src&apos;</span><br><span class="line">make[2]: Entering directory `/Users/yibo/Downloads/6.4.0/src/magick&apos;</span><br><span class="line">../../Make.rules:175: *** missing separator.  Stop.</span><br><span class="line">make[2]: Leaving directory `/Users/yibo/Downloads/6.4.0/src/magick&apos;</span><br><span class="line">make[1]: *** [dir_target] Error 2</span><br><span class="line">make[1]: Leaving directory `/Users/yibo/Downloads/6.4.0/src&apos;</span><br><span class="line">make: *** [dir_target] Error 2</span><br></pre></td></tr></table></figure><p>修改Make.rules, 175,176 四个空格换成tab，参见: <a href="http://stackoverflow.com/a/15880079/3368344" target="_blank" rel="noopener">http://stackoverflow.com/a/15880079/3368344</a></p><h6 id="make-make-install-成功之后"><a href="#make-make-install-成功之后" class="headerlink" title="make make install 成功之后"></a>make make install 成功之后</h6><p>在/usr/local/lib会生成三个文件</p><ul><li>jmagick-6.4.0.jar</li><li>libJMagick-6.4.0.so</li><li>libJMagick.so -&gt; ./libJMagick-6.4.0.so<br>在动态链接库在不同平台的形式：</li><li>windows .dll</li><li>linux .so</li><li>macos .dylib (最新的动态链接库) .jnilib (以前的动态链接库)<br>需要在mac上使用动态链接库，需要使用dylib的后缀的名称。<br>cp libJMagick.so libJMagick.dylib</li></ul><h5 id="测试使用"><a href="#测试使用" class="headerlink" title="测试使用"></a>测试使用</h5><p>IDEA的单元测试没有问题</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">try &#123;</span><br><span class="line">      String property = System.getProperty(&quot;java.library.path&quot;);</span><br><span class="line">      System.out.println(property);  // 输出/usr/local/lib</span><br><span class="line">      // System.setProperty(&quot;java.library.path&quot;, &quot;/usr/local/lib&quot;);</span><br><span class="line">      // System.loadLibrary(&quot;JMagick&quot;);</span><br><span class="line">      System.out.println(&quot;success&quot;);</span><br><span class="line">      MagickInfo magickInfo = new MagickInfo(&quot;myImage&quot;);</span><br><span class="line">    &#125; catch (MagickException e) &#123;</span><br><span class="line">      System.out.println(e);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>IDEA的Tomcat需要额外处理：<br>tomcat的VM options增加：<br>-Djmagick.systemclassloader=no -Djava.library.path=/usr/local/lib</p><p>参考资料：<br><a href="https://www.zybuluo.com/yibo/note/125940" target="_blank" rel="noopener">Mac OS X 安装JMagick</a><br><a href="http://promiselove.github.io/2017/11/30/Mac%E5%AE%89%E8%A3%85Imagemagick%E5%92%8CJMagick/" target="_blank" rel="noopener">Mac安装Imagemagick和JMagick</a><br><a href="http://noahsnail.com/2016/12/12/2016-12-12-Linux%E7%9A%84pkg-config%E5%91%BD%E4%BB%A4/" target="_blank" rel="noopener">Linux的pkg-config命令</a><br><a href="https://elf8848.iteye.com/blog/455675" target="_blank" rel="noopener">ImageMagick +Jmagick安装</a>   </p>]]></content>
      
      
      
        <tags>
            
            <tag> 后端 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>phantomjs截图文字不显示、phantmjs文字不显示、phantomJS学习了解</title>
      <link href="/2018/12/18/phantomjs%E6%88%AA%E5%9B%BE%E6%96%87%E5%AD%97%E4%B8%8D%E6%98%BE%E7%A4%BA/"/>
      <url>/2018/12/18/phantomjs%E6%88%AA%E5%9B%BE%E6%96%87%E5%AD%97%E4%B8%8D%E6%98%BE%E7%A4%BA/</url>
      
        <content type="html"><![CDATA[<p><a href="https://github.com/drgonroot/drgonroot.github.io/issues/new" target="_blank" rel="noopener">吐槽、建议、解惑入口网址</a></p><h4 id="PhantomJS-基于-webkit-内核的无界面浏览器"><a href="#PhantomJS-基于-webkit-内核的无界面浏览器" class="headerlink" title="PhantomJS  基于 webkit 内核的无界面浏览器"></a>PhantomJS  基于 webkit 内核的无界面浏览器</h4><blockquote><p>webkit:<br>webkit tutorial : <a href="https://www.paulirish.com/2013/webkit-for-developers/" target="_blank" rel="noopener">https://www.paulirish.com/2013/webkit-for-developers/</a><br>中文了解:<br><a href="https://www.jianshu.com/p/a129b05e2216" target="_blank" rel="noopener">https://www.jianshu.com/p/a129b05e2216</a></p></blockquote><h4 id="学习缘由"><a href="#学习缘由" class="headerlink" title="学习缘由"></a>学习缘由</h4><p>运营活动需要将用户这一年的数据展示出来，用户是可以截图的。<br>当时方案好几个:</p><ol><li>用户自己手动截图，但是一个用户截图效果有可能会不太好，也太麻烦，最无奈的方案。</li><li>通过前端来完成给用户截图的功能。（后续被前端废弃。）</li><li>服务端对网页进行截图，然后用户直接下载。（推荐使用PhantomJS）<a id="more"></a><h4 id="使用过程和了解"><a href="#使用过程和了解" class="headerlink" title="使用过程和了解"></a>使用过程和了解</h4><a href="http://phantomjs.org/" target="_blank" rel="noopener">phantomjs官网</a><br>下载包分为源码代码包和二进制代码包。<blockquote><p>（因为之前不明白centos RPM 包含源码代码包和二进制代码包，碰到了一些麻烦。）</p></blockquote></li></ol><p>phantmjs分平台的软件是二进制包，下载就可以使用。<br>但是值得注意的是mac和linux的平台上，有个细节linux需要依赖fonts。<br>一开始我们没有注意这个问题，才有今天的文章。在mac上截图很正常，但是centos服务器截图就是没有文字。</p><blockquote><p><strong>分析:</strong><br>当时出现在服务器没有显示文字，不明白。</p></blockquote><ol><li>开始怀疑是字体颜色的问题，修改后发现没有效果。</li><li>再次认为是JS的原因，通过对请求生成的html进行输出和截图，发现有可能不是html的问题。</li><li>最后查阅相关资料，浏览器查找结果有些展示说是字体的问题（因为与字体有关，操作麻烦，直接放弃。想找简单的方法处理），最后没有办法才尝试，字体相关操作。</li></ol><p><a href="https://bingozb.github.io/51.html" target="_blank" rel="noopener">phantomjs实现服务端屏幕截图</a><br>这篇博客对linux服务端phantomJS截图的做了很深刻的讲解。但是字体使用是微软雅黑。按照这篇博客讲解操作，我们服务器这边截图的字体样式有点难看，太纤细了。</p><p>因此将字体变得好看成为重中之重。    </p><ol><li>查询当前MAC浏览器的字体是什么类型？？ (WhatFont)查询字体 结果：PingFang SC                    </li><li>前端指定字体样式:font-family {} 没有效果         </li><li>前端@font-face 下载字体 考虑网速的问题，需要压缩字体。没有执行</li><li>服务端寻找字体，放到服务器使用。 {最终解决方案} 首选字体PingFang SC</li></ol><p><a href="http://jser.me/2016/05/31/phantomjs%E5%9C%A8linux%E4%B8%8B%E6%88%AA%E5%9B%BE%E4%B8%AD%E6%96%87%E5%AD%97%E4%BD%93%E9%97%AE%E9%A2%98.html" target="_blank" rel="noopener">phantomjs在linux下截图中文字体问题</a><br>给我们很好的思路，尝试拷贝字体。</p><ol><li>直接mac 命令行拷贝 没有权限失败。</li><li>通过mac 命令行 (open /) 打开系统文件，进行/System/Library/Fonts的PingFang.ttc 拖拽拷贝成功。</li></ol><p>需要将PingFang.ttc的格式转换为linux可用ttf格式。上面博客推荐的转换地址发现，超过了上传文件最大限度。</p><ol><li><a href="https://www.files-conversion.com/font-converter.php" target="_blank" rel="noopener">Convert Font Files</a> 这个网址转换成功。</li></ol><p>但是新的问题：浏览器上使用的是PingFang SC字体。linux服务器使用的PingFang字体，导致看到和截图字体样式不一致。</p><p>linux 建立字体索引 更新缓存</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mkfontscale</span><br><span class="line">mkfontdir</span><br><span class="line">fc-cache</span><br></pre></td></tr></table></figure><h4 id="附赠代码"><a href="#附赠代码" class="headerlink" title="附赠代码"></a>附赠代码</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&gt; renderImage.js phantomJS 的执行js代码</span><br><span class="line"></span><br><span class="line">&quot;use strict&quot;;</span><br><span class="line">var page = require(&apos;webpage&apos;).create();</span><br><span class="line">var system = require(&apos;system&apos;), pageWidth, pageHeight, pageUrl, format, quality, imagePath;</span><br><span class="line">if (system.args.length != 7) &#123;</span><br><span class="line">    console.log(&apos;Usage: renderImage.js &lt;pageWidth pageHeight pageUrl format quality imagePath&gt;&apos;);</span><br><span class="line">    phantom.exit(1);</span><br><span class="line">&#125; else &#123;</span><br><span class="line">        pageWidth = system.args[1]</span><br><span class="line">        pageHeight = system.args[2];</span><br><span class="line">        pageUrl = system.args[3];</span><br><span class="line">        format = system.args[4];</span><br><span class="line">        quality = system.args[5];</span><br><span class="line">        imagePath = system.args[6];</span><br><span class="line">&#125;</span><br><span class="line">page.viewportSize = &#123; width: pageWidth, height: pageHeight &#125;;</span><br><span class="line">page.open(pageUrl, function start(status) &#123;</span><br><span class="line">  page.render(imagePath, &#123;format: format, quality: quality&#125;);</span><br><span class="line">  phantom.exit();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&gt; java 执行phantomJS的代码</span><br><span class="line">  /**</span><br><span class="line">    * 将网页渲染成图片</span><br><span class="line">    * format 图片格式 quality 图片质量（0~100）</span><br><span class="line">    * pageWidth 网页宽度 pageHeight 网页高度</span><br><span class="line">    */</span><br><span class="line">   public static void renderImage(String phantomJSPath, String renderImageJSPath, int pageWidth, int pageHeight, String renderUrl, String format, int quality, String outPutImagePath) &#123;</span><br><span class="line">       // 执行命令参数</span><br><span class="line">       List&lt;String&gt; params = Arrays.asList(phantomJSPath, renderImageJSPath, pageWidth + &quot;&quot;, pageHeight + &quot;&quot;, renderUrl, format, quality + &quot;&quot;, outPutImagePath);</span><br><span class="line"></span><br><span class="line">       ProcessBuilder processBuilder = new ProcessBuilder()</span><br><span class="line">               .command(params);</span><br><span class="line">       try &#123;</span><br><span class="line">           processBuilder.redirectError();</span><br><span class="line">           Process process = processBuilder.start();</span><br><span class="line">           InputStream processIS = process.getInputStream();</span><br><span class="line">           String output = IOUtils.toString(processIS);</span><br><span class="line">           logger.info(&quot;渲染成图片: &#123;&#125; -&gt; &#123;&#125;&quot;, processBuilder.command(), output);</span><br><span class="line">           IOUtils.closeQuietly(processIS);</span><br><span class="line">           int result = process.waitFor();</span><br><span class="line">           if (result != 0) &#123;</span><br><span class="line">               logger.warn(&quot;执行失败: &#123;&#125; -&gt; &#123;&#125;&quot;, processBuilder.command(), output);</span><br><span class="line">           &#125;</span><br><span class="line">       &#125; catch (InterruptedException | IOException e) &#123;</span><br><span class="line">           logger.warn(&quot;执行失败: &#123;&#125; -&gt; &#123;&#125;&quot;, processBuilder.command(), e);</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><p>参考资料：<br><a href="https://bingozb.github.io/51.html" target="_blank" rel="noopener">phantomjs实现服务端屏幕截图</a><br><a href="http://jser.me/2016/05/31/phantomjs%E5%9C%A8linux%E4%B8%8B%E6%88%AA%E5%9B%BE%E4%B8%AD%E6%96%87%E5%AD%97%E4%BD%93%E9%97%AE%E9%A2%98.html" target="_blank" rel="noopener">phantomjs在linux下截图中文字体问题</a><br><a href="http://phantomjs.org/download.html" target="_blank" rel="noopener">phantmjs下载地址</a><br><a href="https://www.jianshu.com/p/e599ae0c7680" target="_blank" rel="noopener">PingFang sc字体的使用</a><br><a href="http://phantomjs.org/api/webpage/method/open.html" target="_blank" rel="noopener">phantomJS API</a>       </p>]]></content>
      
      
      
        <tags>
            
            <tag> phantomjs </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PERL学习</title>
      <link href="/2018/12/05/PERL%E5%AD%A6%E4%B9%A0/"/>
      <url>/2018/12/05/PERL%E5%AD%A6%E4%B9%A0/</url>
      
        <content type="html"><![CDATA[<p><a href="https://github.com/drgonroot/drgonroot.github.io/issues/new" target="_blank" rel="noopener">吐槽、建议、解惑入口网址</a><br>perl 是脚本语言，在工作部署、编译等一些关于linux服务器上的事情都会跟perl打交道。写下自己学习路程，给自己日后总结。</p><h3 id="文档查询"><a href="#文档查询" class="headerlink" title="文档查询"></a>文档查询</h3><p>perldoc -f xxxx</p><h3 id="perl数据类型"><a href="#perl数据类型" class="headerlink" title="perl数据类型"></a>perl数据类型</h3><h4 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h4><p>定义字符串变量: my $name (my: 定义变量 $: 表示字符串 name: 变量名)<br><strong><em>注意点</em></strong>         </p><ul><li>内插型字符串<blockquote><p>其他变量的数据可以在插入字符串中展示</p></blockquote></li></ul><a id="more"></a><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">my $name = &quot;Inigo MOntoya&quot;;</span><br><span class="line">print &quot;My name is $name&quot;;</span><br></pre></td></tr></table></figure><ul><li>非内插型字符串<blockquote><p>无论什么字符都直接展示</p></blockquote></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print &apos;You may have won $1,000,000&apos;;</span><br></pre></td></tr></table></figure><ul><li>转义字符<blockquote><p>有些特殊字符需要转义才能正输出</p></blockquote></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">my $email = &quot;andy@foo.com&quot;;</span><br><span class="line">print $email;</span><br><span class="line"># Prints &quot;andy.com&quot;</span><br><span class="line">解决方案:</span><br><span class="line">my $email = &quot;andy\@foo.com&quot;;</span><br></pre></td></tr></table></figure><h4 id="字符串操作函数"><a href="#字符串操作函数" class="headerlink" title="字符串操作函数"></a>字符串操作函数</h4><ul><li>length() 获取字符串长度</li><li>subStr() 能够截取字符串</li></ul><h4 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h4><ul><li><p>创建</p></li><li><p>访问 $stooges[1]</p></li><li><p>数组长度 @stooges  scalar @stooges</p></li><li><p>数组特性</p><ul><li>数组没有边界</li><li>数组合并会平展元素</li></ul></li><li><p>数组操作方法</p><ul><li>shift 从数组开头移除元素</li><li>unshift 将元素添加到数组开头</li><li>push 将元素添加到数组的结尾</li><li>pop 从数组的结尾移除元素</li></ul></li><li><p>数组高级用法</p><ul><li><p>提取数组的部分元素</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">my @a = &apos;a&apos;..&apos;z&apos;;</span><br><span class="line">my @vowels = @a[0, 4, 8, 14, 20];</span><br></pre></td></tr></table></figure></li><li><p>分配数组块 使用splice</p></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">使用场景 数组拼接</span><br><span class="line">my @a = qw(Steve Stu Stan);</span><br><span class="line">$a[1] = [&apos;Stewart&apos;, &apos;Zane&apos;];</span><br><span class="line"># @a = (&apos;Steve&apos;, ARRAY(0x841214c), &apos;Stan&apos;)</span><br><span class="line"></span><br><span class="line">my @a = qw(Steve Stu Stan);</span><br><span class="line">splice @a 1, 1, &apos;Stewart&apos;, &apos;Zane&apos;;</span><br><span class="line">#@a = (&apos;Steve&apos;, &apos;Stewart&apos;, &apos;Zane&apos;, &apos;Stan&apos;)</span><br></pre></td></tr></table></figure><ul><li>利用map处理数组 (<strong>map 本质上是返回列表的foreach 循环</strong>)map</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">my @ARRAY = (1, 2, 3, 4, 5);</span><br><span class="line">my %hash = map &#123;$_ =&gt; $_ * 9&#125; @ARRAY;</span><br><span class="line"># %hash = (1 =&gt; 9, 2 =&gt; 18, 3 =&gt; 27, 4 =&gt; 36, 5 =&gt; 45)</span><br></pre></td></tr></table></figure><ul><li>grep从数组中选择项目 (<strong>grep 本质上返回列表foreach循环</strong>)<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">my @ARRAY = (1, 2, 3, 4, 5);</span><br><span class="line">my @NEWARRAY = grep &#123;$_ * 9&#125; @ARRAY</span><br><span class="line">&#123;&#125; 包含表达式的意思</span><br></pre></td></tr></table></figure></li></ul></li></ul><h4 id="哈希"><a href="#哈希" class="headerlink" title="哈希"></a>哈希</h4><p>哈希就是键值对</p><ul><li>创建</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">1.方法一</span><br><span class="line">my %stooges = (</span><br><span class="line">  &apos;Moe&apos;, &apos;Howard&apos;,</span><br><span class="line">  &apos;Larry&apos;, &apos;Fine&apos;,</span><br><span class="line">  );</span><br><span class="line">2. 方法二</span><br><span class="line">my %stooges = (</span><br><span class="line">  Moe =&gt; &apos;Howard&apos;,</span><br><span class="line">  Larry =&gt; &apos;Fine&apos;,</span><br><span class="line">  )</span><br></pre></td></tr></table></figure><ul><li>哈希转数组</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">my @hash_array = %stooges;</span><br><span class="line"># Contains (&apos;Moe&apos;, &apos;Howard&apos;, &apos;Larry&apos;, &apos;Fine&apos;);</span><br></pre></td></tr></table></figure><ul><li><p>使用{}操作哈希<br>输出哈希值 更改哈希值 删除哈希条目</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">print $stooges&#123;&apos;Moe&apos;&#125;;</span><br><span class="line">#Prints &quot;Howard&quot;;</span><br><span class="line">$stooges&#123;&apos;Moe&apos;&#125; = &apos;NiHao&apos;;</span><br><span class="line">delete $stooges&#123;&apos;Moe&apos;&#125;;</span><br><span class="line">unlink $stooges&#123;&apos;Moe&apos;&#125;;</span><br><span class="line">delete 不会删除文件 unlink 为删除文件</span><br></pre></td></tr></table></figure></li><li><p>哈希的键/值数组</p></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">my @key = keys %stooges;</span><br><span class="line">my @value = values %stooges;</span><br></pre></td></tr></table></figure><ul><li><p>哈希特点</p><ul><li>哈希是无序的</li><li>无法排序</li></ul></li><li><p>哈希define exist的差异</p></li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> perl </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>正则表达式（经典讲解）、正则表达式、正则表达式学习、正则学习了解、正则经验</title>
      <link href="/2018/10/21/regular-expression/"/>
      <url>/2018/10/21/regular-expression/</url>
      
        <content type="html"><![CDATA[<p><a href="https://github.com/drgonroot/drgonroot.github.io/issues/new" target="_blank" rel="noopener">吐槽、建议、解惑入口网址</a></p><h4 id="正则表达式-regular-expression（经典讲解）"><a href="#正则表达式-regular-expression（经典讲解）" class="headerlink" title="正则表达式 regular expression（经典讲解）"></a>正则表达式 regular expression（经典讲解）</h4><blockquote><p>说明：所谓经典讲解，是作者个人直观感觉。个人以前看过大量“正则表达式”的博客文章，但是始终未能深刻理解正则表达式。但是最近一篇有关linux的书籍（开源旅行手册）提到正则表达式，让我醍醐灌顶。</p></blockquote><blockquote><p>说明：本文内容主要来自《OS WORLD TRIP》又名《开源世界旅行手册》,由<strong>Kardinal</strong>著。该书的源地址：<a href="https://linuxtoy.org/pages/download.html" target="_blank" rel="noopener">下载地址</a> 。正则表达式的内容在部分2:地理的第26章</p></blockquote><a id="more"></a><h4 id="讲解"><a href="#讲解" class="headerlink" title="讲解"></a>讲解</h4><h5 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h5><h6 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h6><p>&emsp;&emsp;对于文本内容的处理，通常使用交互方式，手工调整;但如果你对源文本比较了解，则可以采用自动化的批量处理方式，这种方式效率高、迅速快批量处理，要求根据一定规则，匹配源文本中的字符，转换为目标文本，这就要用到正则表达式。<br>最简单的例子，使用 regular 进行匹配，结果如下:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">`regular` expression</span><br></pre></td></tr></table></figure><p>正则表达式有许多变种:glob 表达式、基本正则表达式、perl 正则表达式、emacs 正则表达式……      </p><h6 id="运算优先级"><a href="#运算优先级" class="headerlink" title="运算优先级"></a>运算优先级</h6><p>&emsp;&emsp;正则表达式与数学表达式的不同在于，数学表达式执行数学运算，而正则表达式执行字符运算;相同的是，它们都按一定的优先级进行运算</p><table><thead><tr><th align="center">运算符</th><th align="center">操作</th></tr></thead><tbody><tr><td align="center">\</td><td align="center">转义符</td></tr><tr><td align="center">()</td><td align="center">捕获、匹配、断言</td></tr><tr><td align="center">[]</td><td align="center">字符类</td></tr><tr><td align="center">*+?</td><td align="center">限定符</td></tr><tr><td align="center">{}</td><td align="center">范围</td></tr><tr><td align="center">^$</td><td align="center">位置和顺序</td></tr><tr><td align="center">&#124;</td><td align="center">或</td></tr></tbody></table><h6 id="转义符"><a href="#转义符" class="headerlink" title="转义符"></a>转义符</h6><p>&emsp;&emsp;如果源文本中出现了正则表达式中的运算符，如 ( ，使用 <code>(</code> 无法匹配下列文本中的括弧，这时要使用 <code>\</code> 进行转义。用 <code>\(</code> 匹配。在 Emacs 和 Vim 正则表达式中正好反过来，使用 <code>\(</code> 表示分组，用 <code>(</code> 匹配字符。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">`(`regular expression)</span><br></pre></td></tr></table></figure><p>&emsp;&emsp;在文本中匹配“运算优先级”一节中的所有运算符,都要用这种形式:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">\运算符</span><br><span class="line">如 \* \+ \- \\的使用</span><br></pre></td></tr></table></figure><p>在文本中匹配 <code>\</code> 本身，要用 <code>\\</code>。<br>非运算符前使用 <code>\</code>，则有特殊的意义，例如 <code>\n</code> 匹配一个换行符。常用转义字符:   </p><h5 id="常规匹配"><a href="#常规匹配" class="headerlink" title="常规匹配"></a>常规匹配</h5><table><thead><tr><th>转义字符</th><th>涵义</th></tr></thead><tbody><tr><td>.</td><td>匹配除换行符以外的任意字符</td></tr><tr><td>\w</td><td>匹配字母或数字或下划线或汉字</td></tr><tr><td>\s</td><td>匹配任意的空白符</td></tr><tr><td>\d</td><td>匹配数字</td></tr><tr><td>\b</td><td>匹配单词的开始或结束，在字符类里代表退格</td></tr><tr><td>^</td><td>匹配字符串的开始，在字符类里表 示”非“</td></tr><tr><td>$</td><td>匹配字符串的结束</td></tr><tr><td>[aeiou]</td><td>字符集合,匹配所包含的任意一个字符</td></tr></tbody></table><h5 id="反向匹配"><a href="#反向匹配" class="headerlink" title="反向匹配"></a>反向匹配</h5><table><thead><tr><th>转义字符</th><th>涵义</th></tr></thead><tbody><tr><td>\W</td><td>匹配任意不是字母，数字，下划线，汉字的字符</td></tr><tr><td>\S</td><td>匹配任意不是空白符的字符</td></tr><tr><td>\D</td><td>匹配任意非数字的字符</td></tr><tr><td>\B</td><td>匹配不是单词开头或结束的位置</td></tr><tr><td>[^aeiou]</td><td>匹配除了aeiou 这几个字母以外的任意字符</td></tr></tbody></table><h5 id="特殊字符"><a href="#特殊字符" class="headerlink" title="特殊字符"></a>特殊字符</h5><table><thead><tr><th>转义字符</th><th>涵义</th></tr></thead><tbody><tr><td>\a</td><td>报警字符(打印它的效果是电脑嘀一 声)</td></tr><tr><td>\t</td><td>制表符，Tab</td></tr><tr><td>\r</td><td>回车</td></tr><tr><td>\v</td><td>垂直制表符</td></tr><tr><td>\f</td><td>换页符</td></tr><tr><td>\n</td><td>换行符</td></tr><tr><td>\e</td><td>Escape</td></tr><tr><td>\0nn</td><td>ASCII 代码中八进制代码为 nn 的字符</td></tr><tr><td>\xnn</td><td>ASCII 代码中十六进制代码为 nn 的字符</td></tr><tr><td>\unnnn</td><td>Unicode 代码中十六进制代码为 nnnn 的字符</td></tr><tr><td>\cN</td><td>ASCII 控制字符。比如 \cC 代表 Ctrl+C</td></tr><tr><td>\A</td><td>字符串开头(类似^，但不受处理多行 选项的影响)</td></tr><tr><td>\Z</td><td>字符串结尾或行尾(不受处理多行选 项的影响)</td></tr><tr><td>\z</td><td>字符串结尾(类似$，但不受处理多行 选项的影响)</td></tr><tr><td>\G</td><td>当前搜索的开头</td></tr></tbody></table><h5 id="字符类"><a href="#字符类" class="headerlink" title="字符类"></a>字符类</h5><p>&emsp;&emsp;要想匹配数字、字母、空白很容易，因为已经有了对应这些字符集合的转义符，但是如果你 想匹配没有预定义的字符集合(比如元音字母 a、e、i、o、u)，应该怎么办?<br>&emsp;&emsp;正则表达式中允许你自定义字符类，在方括号里列出它们就可以了</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[aeiou]</span><br></pre></td></tr></table></figure><p>&emsp;&emsp;预定义的字符集合，也可以用字符类表示，如 <code>\d</code> 等价于 [0-9] 有些运算符，在字符类中使用会有另一种意义，例如 ^ 表示“字符串开始”，但在字符类中却<br>表示 “非”，以 <code>expression</code> 为例，使用 [exp] 匹配:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">`exp`r`e`ssion</span><br></pre></td></tr></table></figure><p>使用 [^exp] 匹配(字符串中非 e、x、p 的字符):    </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">exp`r`e`ssion`</span><br></pre></td></tr></table></figure><p>而使用 ^[exp] 匹配(以 e、x 或 p 起始的字符串):</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">`e`xpression</span><br></pre></td></tr></table></figure><h5 id="限定符"><a href="#限定符" class="headerlink" title="限定符"></a>限定符</h5><p>&emsp;&emsp;在上一小节中的表格中，我们知道<code>.</code> 可以匹配除换行符以外的任意字符，使用<code>.</code> 匹配下列 文本:  </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">expression</span><br></pre></td></tr></table></figure><p>但是 <code>.</code> 每次只匹配一个字符，如果想一次匹配多个，则要使用限定符。</p><p>|贪婪限定符|惰性限定符|作用|<br>|—–|—–|<br>|<em>|</em>?|匹配零次或多次|<br>|+|+?|匹配一次或多次|<br>|?|??|匹配零次或一次|<br>|{3}|{3}?|匹配三次|<br>|{3,5}|{3,5}?|匹配三到五次|<br>|{3,}|{3,}?|匹配三次或以上|</p><p>下面通过实例了解限定符的区别。 es 的匹配结果</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">expr`es`sion</span><br></pre></td></tr></table></figure><p>es+ 的匹配结果(e，一个或多个 s)</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">expr`ess`ion</span><br></pre></td></tr></table></figure><p>es* 的匹配结果(e，零或多个 s)</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">`e`xpr`ess`ion</span><br></pre></td></tr></table></figure><p>es? 的匹配结果(e，零或一个 s)</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">`e`xpr`es`sion</span><br></pre></td></tr></table></figure><p><strong>贪婪与懒惰</strong><br>&emsp;&emsp;使用限定符进行匹配时，默认匹配尽可能多的字符。无论用 <code>.*</code> 还是 <code>.+</code>匹配下列文本，都会匹配全部</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">`expression`</span><br></pre></td></tr></table></figure><p>这种方式称为“贪婪模式”。在限定符之后加 <code>?</code> 则匹配尽可能少的字符，称为“懒惰模式”。 (懒惰模式的详解：<code>.+</code> 匹配一个或多个任意字符，在贪婪模式中，它匹配尽可能多的字符;而懒惰模式中(<code>.+?</code>)，则只匹配一个字符; <code>.{3,5}</code> 在贪婪模式中尽可能匹配5个字符，在懒惰模 式中(<code>.{3,5}?</code>)只匹配3个字符; <code>?</code>和 <code>*</code> 这样可以匹配零次的限定符，在懒惰模式下不匹配任何字符( <code>.*?</code>、<code>.??</code> ))。<br>例如，使用贪婪模式 a.+b 匹配:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">`aaabab`</span><br></pre></td></tr></table></figure><p>使用懒惰模式 a.+?b 匹配:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">`aaab`ab</span><br></pre></td></tr></table></figure><h5 id="分支条件"><a href="#分支条件" class="headerlink" title="分支条件"></a>分支条件</h5><p><code>|</code> 表示“或”，使用它进行分支选择:<br>例如 <code>[a-z]+|\d+</code> 匹配单词或数字:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">expression 123</span><br></pre></td></tr></table></figure><h5 id="分组、捕获、不捕获"><a href="#分组、捕获、不捕获" class="headerlink" title="分组、捕获、不捕获"></a>分组、捕获、不捕获</h5><h6 id="分组"><a href="#分组" class="headerlink" title="分组"></a>分组</h6><p>&emsp;&emsp;使用<code>(表达式)</code>对表达式进行分组，即用小括号来指定子表达式叫做分组。例如使用 <code>(\d{3}\.){2}</code> 匹配下面例子中的数字:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">abc`123.456.`def</span><br></pre></td></tr></table></figure><p><code>\d{3}</code> 表示三个数字， <code>(\d{3}\.)</code> 表示三个数字加<code>“ . ”</code>为一组，<code>{2}</code> 表示这一组内容重复两次</p><h6 id="捕获"><a href="#捕获" class="headerlink" title="捕获"></a>捕获</h6><p>&emsp;&emsp;在对表达式进行分组的时候，会捕获文本到自动命名的组里。可以使用 <code>\1 \2 ......</code> 来反向引用组。例如用 <code>([a-z]*)\s(\d*)</code> 匹配下列文本， <code>([a-z]*)</code> 为 <code>\1</code> 组， <code>(\d*)</code> 为 <code>\2</code> 组</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">`kardinal 1234567`</span><br></pre></td></tr></table></figure><p>使用 <code>\2\s\1</code> 替换 <code>([a-z]*)\s(\d*)</code> ，可以改变两个字符串的顺序</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1234567 kardinal</span><br></pre></td></tr></table></figure><p>使用<code>([a-z]*)\s(\d*)\1</code>匹配下列文本，<code>([a-z]*)</code> 为 <code>\1</code> 组， <code>(\d*)</code> 为 <code>\2</code>组，<code>([a-z]*)\s(\d*)\1</code>中<code>\1</code>是反向引用组:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">`kardinal 1234567kardinal`</span><br></pre></td></tr></table></figure><p>如果分组较多，计数可能会不太方便，可以给分组指定名称，例如:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(?&lt;name&gt;[a-z]*)\s(?&lt;num&gt;\d*)  name、num 是分组的名称</span><br><span class="line">\k&lt;num&gt;\s\k&lt;name&gt; (?#使用“`\k&lt;name&gt;`”反向引用)</span><br></pre></td></tr></table></figure><p>使用 <code>(?:表达式)</code> ，则只是分组，而不捕获，下面例子中， <code>(\d*)</code> 为 <code>\1</code> 组</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(?:[a-z]*)\s(\d*)</span><br></pre></td></tr></table></figure><p>不捕获的典型应用：<br>用使用在或的应用中，使用或需要使用括号即捕获组，但是又不想存在捕获组，则可以使用不捕获。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">l(?:i|o|e)ve</span><br></pre></td></tr></table></figure><blockquote><p>注明：反向引用提供了标识字符串中的重复字符或子字符串的方便途径。 例如，如果输入字符串包含某任意子字符串的多个匹配项，可以使用捕获组匹配第一个出现的子字符串，然后使用反向引用匹配后面出现的子字符串。捕获文本放入对应的分组是需要消耗内存的。如何后续不反向引用分组，可以采用捕获但是不分组。</p></blockquote><h6 id="零宽断言"><a href="#零宽断言" class="headerlink" title="零宽断言"></a>零宽断言</h6><p>&emsp;&emsp;目前为止，我们学到的正则表达式匹配，都是有“宽度”的，使用 <code>\w+</code>。 匹配下面文本，会将 <code>。</code> 一同匹配:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">regular。</span><br><span class="line">expression。</span><br></pre></td></tr></table></figure><p>如果不想匹配符号，只匹配一个位置，就要用到“零宽断言”(匹配宽度为零，满足一定的条件的断言)，零宽断言使用 (?=表达式) 的语法，例如 <code>\w+(?=。)</code> ，其中 <code>(?=。)</code> 表示<code>。</code> 前面的位置(先行断言)。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">`regular`。</span><br><span class="line">`expression`。</span><br></pre></td></tr></table></figure><p>高级应用(关于为什么叫零宽断言)：<br>表达式写法：<code>\w+(?=。)。\w+</code> | <code>\w+(?=。)\w+</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">`regular。zero`</span><br></pre></td></tr></table></figure><p>如果需要匹配后面的位置，如:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">。`regular`</span><br><span class="line">。`expression`</span><br></pre></td></tr></table></figure><p>则要用到后发断言 <code>(?&lt;=。)</code> ，使用 <code>(?&lt;=。)\w+</code> 得到上面的匹配结果<br>使用 <code>(?&lt;=&lt;b&gt;).*(?=&lt;/b&gt;)</code> 匹配标签中的内容</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;b&gt;`粗体`&lt;/b&gt;</span><br></pre></td></tr></table></figure><h6 id="负向零宽断言"><a href="#负向零宽断言" class="headerlink" title="负向零宽断言"></a>负向零宽断言</h6><p>&emsp;&emsp;负向零宽断言 <code>(?!表达式)</code> 也是匹配一个零宽度的位置，不过这个位置的“断言”取表达式的反值，例如 <code>(?!表达式)</code> 表示 <code>表达式</code> 前面的位置，如果 <code>表达式</code> 不成立，匹配这个位置;如果 <code>表达式</code> 成立，则不匹配:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">`expression`</span><br><span class="line">expression。</span><br><span class="line">`expression`，</span><br><span class="line">`expression`;</span><br></pre></td></tr></table></figure><p>以上为使用 <code>.+n(?!。)</code> 的匹配结果。注意与 <code>.+n[^。]</code> 匹配的区别</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">expression</span><br><span class="line">`expression，`</span><br><span class="line">`expression;`</span><br><span class="line">expression。</span><br></pre></td></tr></table></figure><p>同样，负向零宽断言也有“先行”和“后发”两种，负向零宽后发断言为 <code>(?&lt;!表达式)</code> 使用 <code>(?&lt;![&lt;/])para(?!&gt;)</code> 匹配下面文本:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;para&gt;`para`表示一个段落&lt;/para&gt;</span><br></pre></td></tr></table></figure><p><code>(?&lt;![&lt;/])</code> 表示 para 左边不能为 <code>&lt;</code> 或 <code>/</code> ; <code>(?!&gt;)</code> 表示 para 右边不能为 <code>&gt;</code>。</p><h6 id="常用分组语法"><a href="#常用分组语法" class="headerlink" title="常用分组语法"></a>常用分组语法</h6><table><thead><tr><th>分类</th><th>代码/语法</th><th>说明</th></tr></thead><tbody><tr><td>捕获</td><td>(exp)</td><td>匹配exp,并捕获文本到自动命名的组里</td></tr><tr><td></td><td>(?exp)</td><td>匹配exp,并捕获文本到名称为name的组里，也可以写成(?’name’exp)</td></tr><tr><td></td><td>(?:exp)</td><td>匹配exp,不捕获匹配的文本，也不给此分组分配组号</td></tr><tr><td>零宽断言</td><td>(?=exp)</td><td>匹配exp前面的位置</td></tr><tr><td></td><td>(?&lt;=exp)</td><td>匹配exp后面的位置</td></tr><tr><td></td><td>(?!exp)</td><td>匹配后面跟的不是exp的位置</td></tr><tr><td></td><td>(?&lt;!exp)</td><td>匹配前面不是exp的位置</td></tr><tr><td>注释</td><td>(?#comment)</td><td>这种类型的分组不对正则表达式的处理产生任何影响，用于提供注释让人阅读</td></tr></tbody></table><p>推荐其他网址<br><a href="http://tool.oschina.net/uploads/apidocs/jquery/regexp.html" target="_blank" rel="noopener">正则表达式全集</a><br><a href="https://www.kancloud.cn/thinkphp/regex-guide/43534" target="_blank" rel="noopener">正则表达式简明参考</a> (重点在分组和反向引用)<br><a href="https://luke0922.gitbooks.io/learnregularexpressionin30minutes/content/chapter3.html" target="_blank" rel="noopener">正则表达式30分钟教程</a> (常用分组语法的总结)<br><a href="http://blog.51cto.com/cnn237111/749047" target="_blank" rel="noopener">正则表达式的先行断言(lookahead)和后行断言(lookbehind)</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CORS学习、实战内网测试和外网更新</title>
      <link href="/2018/10/08/CORS%E5%86%85%E7%BD%91%E6%B5%8B%E8%AF%95%E5%92%8C%E5%A4%96%E7%BD%91%E6%9B%B4%E6%96%B0/"/>
      <url>/2018/10/08/CORS%E5%86%85%E7%BD%91%E6%B5%8B%E8%AF%95%E5%92%8C%E5%A4%96%E7%BD%91%E6%9B%B4%E6%96%B0/</url>
      
        <content type="html"><![CDATA[<p><a href="https://github.com/drgonroot/drgonroot.github.io/issues/new" target="_blank" rel="noopener">吐槽、建议、解惑入口网址</a></p><h5 id="解释CORS的定义"><a href="#解释CORS的定义" class="headerlink" title="解释CORS的定义"></a>解释CORS的定义</h5><p>CORS （Cross-origin resource sharing）跨域资源共享问题，是W3C的标准。    </p><blockquote><p>当某一资源在自己的资源服务器上的不同域或者端口请求另一个资源时，那么该资源会发起一次跨域请求. (Cross-Origin Resource Sharing (CORS) is a mechanism that uses additional HTTP headers to tell a browser to let a web application running at one origin (domain) have permission to access selected resources from a server at a different origin. A web application makes a cross-origin HTTP request when it requests a resource that has a different origin (domain, protocol, and port) than its own origin.)    </p></blockquote><h5 id="CORS请求介绍"><a href="#CORS请求介绍" class="headerlink" title="CORS请求介绍"></a>CORS请求介绍</h5><p>CORS请求是指当前请求出现和源站不一样的请求协议、域名(含二级域名)、端口。<br><a href="https://segmentfault.com/a/1190000007326671" target="_blank" rel="noopener">详细介绍哪些情况会出现跨域的情况列链接</a>并前端的角度该如何解决问题。</p><a id="more"></a><h4 id="CORS请求拦截"><a href="#CORS请求拦截" class="headerlink" title="CORS请求拦截"></a>CORS请求拦截</h4><p>我遇到的HTTPS在CHROME浏览器出现跨域字体无法显示,在safari和HTTP的情况没有出现。<br>浏览器限制了发起跨站请求，存在可能是跨站请求可以正常发起，但是返回结果不包含Access-Control-Allow-Origin等符合信息就被浏览器拦截了。<br>目前一般很少出现浏览器主动限制CORS请求呢。</p><h5 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h5><p>对于简单请求，浏览器直接发出 CORS 请求。具体来说，就是由浏览器自动在头信息中增加一个 Origin 字段。然后只需要在返回的相应上加上Access-Control-Allow-Origin:[Origin]|* 。<br><a href="https://zoctan.github.io/2018/07/21/%E5%AD%A6%E4%B9%A0/%E8%B7%A8%E5%9F%9F%E8%B5%84%E6%BA%90%E5%85%B1%E4%BA%AB%20CORS%20%E8%AF%A6%E8%A7%A3%EF%BC%88%E8%BD%AC%EF%BC%89/" target="_blank" rel="noopener">前端详细介绍了解</a></p><h5 id="接下来详细讲实际解决的情况"><a href="#接下来详细讲实际解决的情况" class="headerlink" title="接下来详细讲实际解决的情况"></a>接下来详细讲实际解决的情况</h5><ul><li>需要让内网出现线上的情况</li><li>按照网上解决方案去解决</li><li>线上CDN资源需要让其失效</li></ul><h6 id="内网配置出线上环境"><a href="#内网配置出线上环境" class="headerlink" title="内网配置出线上环境"></a>内网配置出线上环境</h6><p>我们内网是http协议，不支持https的协议，没有出现线上的情况。</p><ul><li>先需要将线上的证书下载到本地，在上传到内网指定位置。</li><li>先将内网的nginx的配置文本上加上https的443的端口访问处理。(/opt/nginx/conf/conf.d)</li><li>证书和域名是一一对应，所有配置文件的server-name 为证书上的域名。<blockquote><pre><code>server {  listen 443;  server_name #证书上的域名即线上的网址  access_log  #日志地址  ssl    on;  ssl_certificate   #证书地址  ssl_certificate_key    #证书地址  location ~ / {          proxy_http_version 1.1;          proxy_set_header Connection &quot;&quot;;          proxy_set_header  X-Real-IP  $remote_addr;          proxy_set_header  FORWARDED-FOR  $remote_addr;          proxy_pass #代理到Tomcat的服务器的域名+端口          include conf.d/proxy_params;}}</code></pre></blockquote></li></ul><p>1.遇到问题只能通过线上域名访问，但是无法访问到内网的资源。<br>2.<a href="https://www.jianshu.com/p/4394aaf97492" target="_blank" rel="noopener">DNS 服务详细了解</a></p><blockquote><p>先了解客户端进行域名解析的流程：<br>先查hosts文件<br>若没有，查本地DNS缓存<br>若没有，再查DNS服务器：<br>先查DNS服务器的本地DNS缓存<br>若没有，再查DNS服务器的解析库<br>都没有，那DNS向根域发起请求，开始迭代查询<br>如果缓存的有效期为1天的话，能极大减轻DNS服务器的压力，所以对于DNS的架构，“缓存”是很重要的。</p></blockquote><p>3.在/etc/hosts文件加上ip和域名的强制映射(内网ip（nginx） 线上域名）。我们的nginx和tomcat服务器是在同一个服务器上。 接下来线上域名的访问都会转接到内网资源的访问。（另一个办法：通过Charles进行代理实现）<br>4.详细分析后，字体是加载进来的js代码发起的静态资源访问（CORS的访问，二级域名不一样）。折腾好久才想起来的，但是静态资源的访问是通过不同内外网环境进行变化的，内网静态资源都在内网服务器上，外网的静态资源在CDN缓存上和静态资源服务器上。<br>5.将加载js的代码写死，变成直接访问外网的静态资源。（与线上保持一致）<br>6.静态资源访问需要变成内网资源的访问。同样，先在hosts文件加上ip和静态资源的域名的强制映射（内网ip  线上域名）。<br>内网静态资源nginx配置         </p><blockquote><pre><code>server {           listen 443;           server_name #静态资源服务器           gzip on;   ssl    on;   ssl_certificate    /data/config/ssl/star.enjoymeet.com.chained;   ssl_certificate_key    #证书地址   access_log  #证书地址   location ~* \.(eot|ttf|woff|woff2)$ {          add_header  Access-Control-Allow-Origin * ;          add_header Access-Control-Allow-Methods GET;          proxy_pass #代理到Tomcat的服务器的域名+端口   } }</code></pre></blockquote><p>基本上实现在内网测试。<br>参考资料：在nginx上解决问题<br><a href="http://www.yunweipai.com/archives/9381.html" target="_blank" rel="noopener">Nginx通过CORS实现跨域1</a><br><a href="https://hk.saowen.com/a/bcc2bf629fad4037006703f159ec7927ef4cca06a0d7a2cf6d8932584754fa28" target="_blank" rel="noopener">Nginx通過CORS實現跨域2</a><br><a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS" target="_blank" rel="noopener">HTTP访问控制（CORS）</a><br><a href="https://serverfault.com/questions/162429/how-do-i-add-access-control-allow-origin-in-nginx" target="_blank" rel="noopener">How do I add Access-Control-Allow-Origin in NGINX?</a></p><h6 id="线上处理"><a href="#线上处理" class="headerlink" title="线上处理"></a>线上处理</h6><ul><li>CDN 回源，我们回源的访问80端口欧，HTTP协议。</li><li>CDN的资源让线上的资源失效。</li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> 后端 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>自定义程序朗读单词文本</title>
      <link href="/2018/10/06/speackEnglishWord/"/>
      <url>/2018/10/06/speackEnglishWord/</url>
      
        <content type="html"><![CDATA[<p><a href="https://github.com/drgonroot/drgonroot.github.io/issues/new" target="_blank" rel="noopener">吐槽、建议、解惑入口网址</a></p><h4 id="自定义程序朗读单词文本意思"><a href="#自定义程序朗读单词文本意思" class="headerlink" title="自定义程序朗读单词文本意思"></a>自定义程序朗读单词文本意思</h4><p>其核心内容是围绕Mac Terminal终端say命令展开的让学习英语就像听歌一样简单</p><h4 id="具体步骤："><a href="#具体步骤：" class="headerlink" title="具体步骤："></a>具体步骤：</h4><h5 id="第一步"><a href="#第一步" class="headerlink" title="第一步"></a>第一步</h5><ul><li>简单使用say去读一小段的文本 say Hello World;</li><li>学习使用say去读文件 say -f …/…/hello_world.txt|.csv</li><li>详细使用可以输入命令 man say</li></ul><h5 id="第二步"><a href="#第二步" class="headerlink" title="第二步"></a>第二步</h5><ul><li>寻找合适单词翻译网站 通过复制粘贴的形式到文件中</li><li>目前我使用的是<a href="https://www.shanbay.com/" target="_blank" rel="noopener">扇贝网站</a>的单词学习<a id="more"></a><h5 id="第三步"><a href="#第三步" class="headerlink" title="第三步"></a>第三步</h5></li><li>编写自己的程序</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/perl</span><br><span class="line">use strict;</span><br><span class="line">use warnings;</span><br><span class="line"></span><br><span class="line">use Time::HiRes qw(usleep nanosleep);</span><br><span class="line"></span><br><span class="line"># 获取文件参数</span><br><span class="line">my $file = $ARGV[0] or die &quot;Need to get CSV file on the command line\n&quot;;</span><br><span class="line"># 打开文件</span><br><span class="line">open(my $data, &apos;&lt;&apos;, $file) or die &quot;Could not open &apos;$file&apos; $!\n&quot;;</span><br><span class="line"># 一行一行的读文件</span><br><span class="line">while (my $line = &lt;$data&gt;) &#123;</span><br><span class="line">  usleep(500);</span><br><span class="line">  # 去除回车键</span><br><span class="line">  chomp $line;</span><br><span class="line">  # 一行文本按照空格符的进行分割成组</span><br><span class="line">  my @strWord = split(/[\s+]/, $line);</span><br><span class="line">  foreach(@strWord)&#123;</span><br><span class="line">     if($_  !~ /\./)&#123;</span><br><span class="line">     `say &quot;$_&quot;`;</span><br><span class="line">      if($_ =~ /\w+/)&#123;</span><br><span class="line">          my $size = length($_);</span><br><span class="line">         my $strIndex = 0;</span><br><span class="line">         my $strEnd = $strIndex + 1;</span><br><span class="line">          while($strIndex &lt; $size)&#123;</span><br><span class="line">          my $subWord = substr($_, $strIndex, 1);</span><br><span class="line">          `say &quot;$subWord&quot;`;</span><br><span class="line">         $strIndex = $strIndex + 1;</span><br><span class="line">         &#125;</span><br><span class="line">       usleep(500);</span><br><span class="line">      # say 单词和单词的释义</span><br><span class="line">       `say &quot;$_&quot;`;</span><br><span class="line">      &#125;</span><br><span class="line">      print &quot;$_  &quot;;</span><br><span class="line">     &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  print &quot;\n&quot;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>通过perl命令执行程序 eg: perl readCSV.pl /Users/useheart/学习资料/英语单词学习.csv</li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> 学习 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
